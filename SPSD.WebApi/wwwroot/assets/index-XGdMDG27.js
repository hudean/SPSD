import{d as Z,o as le,i as oe,j as me,c as D,k as ue,a as e,l as V,v as L,f as $,m as ne,_ as q,r as y,E as P,F as J,b as _,e as B,n as E,w as O,u as Re,p as Q,g as ze,q as G,t as R,h as de,s as De,x as He,y as Se,z as ge,A as Je}from"./index-D9SJJv-S.js";import{A as We,g as qe,E as Le,a as Ue,b as ce,c as Ne,d as Fe,e as Ke,f as Ge,h as Qe,i as Xe,j as Ye,k as Ze,_ as et,l as tt,m as Oe,n as lt,o as ot,p as st}from"./DeepClone-Cn9qbvrI.js";import{r as Ee,b as Be,h as pe,a as Ie,w as xe,g as Ae}from"./common-D68UFIaE.js";const at={key:0,class:"dialog-container"},it={class:"dialog-from"},nt={class:"from-mian"},rt={style:{width:"100%",height:"820px",display:"flex"}},dt={class:"mian-body"},ut={class:"row-item"},ct={class:"item-text"},pt={class:"row-item"},mt={class:"item-text"},vt={class:"row-item"},ft={class:"item-text"},gt={class:"row-item"},wt={class:"item-text"},yt={class:"row-item"},It={class:"item-text",style:{width:"580px"}},xt={style:{width:"85px",height:"80px",display:"flex","align-items":"center"}},bt={class:"from-bottom"},Pe=1,ht=Z({__name:"AddProjedt",props:{visible:{type:Boolean}},setup(S,{emit:r}){const C=S,s=r;le(()=>{a()}),oe(()=>C.visible,i=>{i&&a()});const g=me({projectName:"",category:Pe,simulationTypeOne:"",simulationTypeTwo:"",projectCode:"",createTime:new Date().toISOString().slice(0,19).replace("T"," "),createUser:"",workDirectory:""}),a=()=>{g.projectName="",g.projectCode="",g.simulationTypeOne="",g.simulationTypeTwo="",g.createTime="",g.createUser="",g.workDirectory=""},h=()=>{console.log("取消"),a(),s("closeDialog",!1)},j=async()=>{console.log("确认"),g.category=Pe,await We(g),s("closeDialog",!0)},p=()=>{console.log("选择工作目录");let o=JSON.stringify({cmd:"OpenFolderDialog"});window.chrome&&window.chrome.webview&&window.chrome.webview.postMessage(o)};typeof window<"u"&&window.chrome&&window.chrome.webview&&typeof window.chrome.webview.addEventListener=="function"&&window.chrome.webview.addEventListener("message",i=>{let o=JSON.parse(i.data);o.cmdCategory==="OpenFolderDialog"&&(g.workDirectory=o.data.folderPath)});const m=i=>{console.log("选择工作目录event:",i);const o=i.target;if(o&&o.files&&o.files.length>0){const M=o.files[0].webkitRelativePath.split("/")[0];g.workDirectory=M}};return(i,o)=>i.visible?($(),D("div",at,[e("div",it,[e("div",nt,[o[17]||(o[17]=e("div",{class:"mian-header"},"新建仿真项目",-1)),e("div",rt,[e("div",dt,[e("div",ut,[o[10]||(o[10]=e("div",{class:"item-title"},"项目名称",-1)),e("div",ct,[V(e("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=M=>g.projectName=M)},null,512),[[L,g.projectName]])])]),e("div",pt,[o[11]||(o[11]=e("div",{class:"item-title"},"仿真类型",-1)),e("div",mt,[V(e("input",{type:"text","onUpdate:modelValue":o[1]||(o[1]=M=>g.simulationTypeOne=M)},null,512),[[L,g.simulationTypeOne]])])]),e("div",vt,[o[12]||(o[12]=e("div",{class:"item-title"},"项目编号",-1)),e("div",ft,[V(e("input",{type:"text","onUpdate:modelValue":o[2]||(o[2]=M=>g.projectCode=M)},null,512),[[L,g.projectCode]])])]),e("div",gt,[o[13]||(o[13]=e("div",{class:"item-title"},"创建人",-1)),e("div",wt,[V(e("input",{type:"text","onUpdate:modelValue":o[3]||(o[3]=M=>g.createUser=M)},null,512),[[L,g.createUser]])])]),e("div",yt,[o[15]||(o[15]=e("div",{class:"item-title"},"工作目录",-1)),e("div",It,[V(e("input",{type:"text","onUpdate:modelValue":o[4]||(o[4]=M=>g.workDirectory=M)},null,512),[[L,g.workDirectory]])]),e("div",{style:{height:"32px"},onClick:o[6]||(o[6]=M=>p())},[o[14]||(o[14]=e("img",{src:" /but_back.png",alt:"",style:{height:"32px",width:"auto"}},null,-1)),V(e("input",{id:"folderInput",type:"file",webkitdirectory:"",onChange:o[5]||(o[5]=M=>m(M))},null,544),[[ne,!1]])])]),o[16]||(o[16]=e("div",{class:"row-item",style:{height:"280px"}},[e("img",{src:" /image_11.png",alt:"",style:{height:"auto",width:"100%"}})],-1))]),e("div",xt,[e("div",{style:{height:"58px",width:"58px","margin-left":"10px"},onClick:o[7]||(o[7]=M=>h())})])])]),e("div",bt,[e("div",{class:"btn-cancel",onClick:o[8]||(o[8]=M=>h())}),e("div",{class:"btn-confirm",onClick:o[9]||(o[9]=M=>j())})])])])):ue("",!0)}}),$t=q(ht,[["__scopeId","data-v-f9da391d"]]),be=S=>Ee({url:Be("Board/"+S),method:"get",responseType:"json"}),jt=S=>Ee({url:Be("Board"),method:"post",data:S,headers:{"content-type":"application/json"},responseType:"json"}),Ct={class:"header"},Mt={class:"left-header"},_t={style:{height:"38px",width:"221px",gap:"16px",display:"flex"}},kt={style:{height:"38px",width:"236px",padding:"0px","background-image":"url( /select.png)"}},Vt={class:"right-header"},Tt={style:{width:"100%",height:"56px",padding:"0px",display:"flex",gap:"10px"}},Dt={class:"demo-progress"},Pt=1,St=Z({__name:"Header",setup(S,{emit:r}){const C=r;le(async()=>{console.log("the component is now mounted."),await o()}),ze();const s=Re(),g=async()=>{await pe(),s.push({path:"/home",replace:!0})},a=y(!1),h=async()=>{await pe(),a.value=!0,console.log("新建项目")},j=async f=>{console.log("关闭新建项目"),f&&await o(),a.value=!1,await Ie()},p=y(""),m=y([]),i=f=>{console.log("选中项目ID:",f),p.value=f,C("updateSelectProjectId",f)},o=async()=>{try{const f=await qe(Pt);console.log("获取项目列表成功",f),f?(m.value=f.map(u=>({label:u.projectName,value:u.id})),m.value.length>0&&i(m.value[0].value)):console.error("项目列表为空")}catch(f){console.error("获取项目列表失败",f)}},M=y(!1),F=y(0),k=async()=>{if(M.value)return;n(!0),await v()===-1&&n(!1)},n=f=>{M.value=f,C("updateIsCalculating",f)},v=async()=>{let f=p.value;try{const u=await Ue(f);if(u){if(!l(u))return P.error("请填写仿真参数建模必填项."),-1;const c=await I(f),z=await U(f),X=await t(f),W=await w(f);let x="",d="",H="";X&&X.length>0&&(z.topMaterialItemId>0&&(x=X.find(te=>te.id==z.topMaterialItemId).eosName),z.bottomMaterialItemId>0&&(d=X.find(te=>te.id==z.bottomMaterialItemId).eosName),z.fwcellMaterialItemId>0&&(H=X.find(te=>te.id==z.fwcellMaterialItemId).eosName));let K={projectId:f,tssfac:u.tssfac,slsfac:u.slsfac,endtim:u.endtim,d3plots:u.d3plots,dt:u.dt,folderPath:c,topTier:z.topTier,bottomTier:z.bottomTier,topMaterialItemId:z.topMaterialItemId,bottomMaterialItemId:z.bottomMaterialItemId,fwcellMaterialItemId:z.fwcellMaterialItemId,topMaterialItemEosName:x,bottomMaterialItemEosName:d,fwcellMaterialItemEosName:H,oneMaterialItemId:W.oneMaterialItemId,twoMaterialItemId:W.twoMaterialItemId,threeMaterialItemId:W.threeMaterialItemId,materialItems:X,speed:u.speed};if(!K.folderPath||K.folderPath=="")return P.error("请选择生成k文件的文件夹."),-1;let Y={cmd:"HandleComputeResult",jsonData:JSON.stringify(K)},re=JSON.stringify(Y);if(window.chrome&&window.chrome.webview)return window.chrome.webview.postMessage(re),1}else return P.error("请填写仿真参数建模"),-1}catch(u){return console.error("获取项目详情失败",u),-1}return-1};typeof window<"u"&&window.chrome&&window.chrome.webview&&typeof window.chrome.webview.addEventListener=="function"&&window.chrome.webview.addEventListener("message",async f=>{let u=JSON.parse(f.data);u&&(u.cmdCategory==="HandleComputeResult"?u.success?P.success(u.message):P.error(u.message):u.cmdCategory==="HandleComputeResultByDyna"&&(u.success?u.data>=100&&u.message==="计算完成"?(P({showClose:!0,message:u.message,type:"success",duration:0}),n(!1),await T(2)):F.value=u.data:(n(!1),P({showClose:!0,message:u.message,type:"error",duration:0}),await T(1))))});const T=async f=>{let u=p.value;try{await Le({id:u,computeResultStatus:f})}catch(c){console.error("修改项目计算结果状态",c)}},I=async f=>{let u="";try{const c=await ce(f);c&&(u=c.workDirectory)}catch(c){console.error("获取项目详情失败",c)}return u},t=async f=>{if(f!==void 0&&f>=0)try{const u=await Ne(f,1,50);if(u&&u.list)return u.list}catch(u){console.error("getMaterialItems:",u)}return[]},U=async f=>{let u={projectId:f,topTier:0,bottomTier:0,topMaterialItemId:0,bottomMaterialItemId:0,fwcellMaterialItemId:0};try{const c=await be(f);c&&(u.topTier=c.topTier,u.bottomTier=c.bottomTier,u.topMaterialItemId=c.topMaterialItemId,u.bottomMaterialItemId=c.bottomMaterialItemId,u.fwcellMaterialItemId=c.fwcellInfo.fwcellMaterialItemId)}catch(c){console.error("获取项目详情失败",c)}return u},w=async f=>{let u={projectId:f,oneMaterialItemId:0,twoMaterialItemId:0,threeMaterialItemId:0};try{const c=await Fe(f);c&&(u.oneMaterialItemId=c.oneMaterialItemId,u.twoMaterialItemId=c.twoMaterialItemId,u.threeMaterialItemId=c.threeMaterialItemId)}catch(c){console.error("获取项目详情失败",c)}return u},l=f=>{const u=["tssfac","slsacf","endtim","d3plots","dt"];for(const c of u)if(f[c]===null||f[c]==="")return!1;return!0};return(f,u)=>{const c=B("el-option"),z=B("el-select"),X=B("el-progress");return $(),D(J,null,[e("div",Ct,[e("div",Mt,[e("div",_t,[e("div",{style:{width:"85px",height:"38px","background-image":"url( /返回.png)"},onClick:u[0]||(u[0]=W=>g())}),e("div",{style:{width:"107px",height:"38px","background-image":"url( /create.png)"},onClick:u[1]||(u[1]=W=>h())})]),e("div",kt,[_(z,{modelValue:p.value,"onUpdate:modelValue":u[2]||(u[2]=W=>p.value=W),clearable:"",placeholder:"请选择",style:{width:"236px",height:"38px",color:"white"},class:E("custom-select"),onChange:i},{default:O(()=>[($(!0),D(J,null,Q(m.value,W=>($(),G(c,{key:W.value,label:W.label,value:W.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])])]),u[6]||(u[6]=e("div",{class:"center-header"},null,-1)),e("div",Vt,[u[5]||(u[5]=e("div",{style:{width:"100%",height:"44px",display:"flex","justify-content":"flex-end"}},[e("div",{style:{width:"100px",height:"32px","background-image":"url( /user.png)"}})],-1)),e("div",Tt,[u[4]||(u[4]=e("div",{style:{width:"145px",height:"56px","background-image":"url( /main_导出报告.png)",visibility:"hidden"}},null,-1)),e("div",{style:{width:"145px",height:"56px","background-image":"url( /计算.png)"},class:E(M.value?"isDisable":""),onClick:u[3]||(u[3]=W=>k())},null,2)]),V(e("div",Dt,[_(X,{"text-inside":!0,"stroke-width":26,percentage:F.value},null,8,["percentage"])],512),[[ne,M.value]])])]),_($t,{visible:a.value,onCloseDialog:j},null,8,["visible"])],64)}}}),Lt=q(St,[["__scopeId","data-v-24792594"]]),Ut={class:"sidebar"},Nt={style:{height:"892px",width:"200px",display:"flex","flex-direction":"column",gap:"10px"}},Ft={style:{width:"100%",height:"826px",display:"flex","flex-direction":"column",gap:"10px"}},Ot={class:"row-ranking"},Et={class:"row-ranking row-item-sub"},Bt={class:"row-ranking row-item-sub"},At={class:"row-ranking row-item-sub"},Rt={class:"row-ranking"},zt={class:"row-ranking"},Ht=Z({__name:"Sidebar",props:{val:Number,isCalculating:Boolean,projectId:Number},setup(S,{emit:r}){const C=S;oe(()=>C.projectId,async k=>{await s()});const s=async()=>{C.projectId!==void 0&&C.projectId>=0&&(await i(C.projectId),await M(C.projectId))},g=r;typeof window<"u"&&window.chrome&&window.chrome.webview&&typeof window.chrome.webview.addEventListener=="function"&&window.chrome.webview.addEventListener("message",async k=>{let n=JSON.parse(k.data);n&&(n.cmdCategory==="HandleComputeResultExtract"?n.success?(P.success(n.message),await F(C.projectId,2)):P.error(n.message):n.cmdCategory==="HandleComputeResultExtract2"&&n.success&&(P.success(n.message),await F(C.projectId,3),await a()))});const a=async()=>{h.value=7,g("updateSelectValue",7),await pe()},h=y(C.val),j=async k=>{if(k!==h.value){if(k===7){if(await s(),p()==!1)return;await pe()}else await Ie();h.value=k,g("updateSelectValue",k)}},p=()=>{if(C.isCalculating)return!1;let k=m.value;if(!k)return!1;if(k.computeResultStatus==3)return!0;let n={projectId:k.id,computeResultStatus:k.computeResultStatus,folderPath:k.workDirectory,partCount:o.value};return xe("HandleComputeResultExtract",n),!1},m=y(null),i=async k=>{try{const n=await ce(k);m.value=n}catch{}},o=y(0),M=async k=>{try{const n=await be(k);if(n){let v=n.topTier+n.bottomTier+1;o.value=v;return}}catch(n){console.error("获取Board详情失败",n)}o.value=0},F=async(k,n)=>{try{await Le({id:k,computeResultStatus:n})}catch(v){console.error("修改项目计算结果状态",v)}};return(k,n)=>($(),D("div",Ut,[e("div",Nt,[e("div",Ft,[e("div",Ot,[n[6]||(n[6]=e("div",{class:"box-rectangle"},"1",-1)),e("div",{class:E(["row-content",h.value==1?"active-Class":""]),onClick:n[0]||(n[0]=v=>j(1))},"项目信息",2)]),n[12]||(n[12]=e("div",{class:"row-ranking"},[e("div",{class:"box-rectangle"},"2"),e("div",{class:"row-content"},"仿真模型")],-1)),e("div",Et,[n[7]||(n[7]=e("div",{class:"box-rectangle"},"A",-1)),e("div",{class:E(["row-content-subset",h.value==3?"active-Class":""]),onClick:n[1]||(n[1]=v=>j(3))},"材料设置",2)]),e("div",Bt,[n[8]||(n[8]=e("div",{class:"box-rectangle"},"B",-1)),e("div",{class:E(["row-content-subset",h.value==4?"active-Class":""]),onClick:n[2]||(n[2]=v=>j(4))},"防护结构模型",2)]),e("div",At,[n[9]||(n[9]=e("div",{class:"box-rectangle"},"C",-1)),e("div",{class:E(["row-content-subset",h.value==5?"active-Class":""]),onClick:n[3]||(n[3]=v=>j(5))},"弹体建模",2)]),e("div",Rt,[n[10]||(n[10]=e("div",{class:"box-rectangle"},"3",-1)),e("div",{class:E(["row-content",h.value==6?"active-Class":""]),onClick:n[4]||(n[4]=v=>j(6))},"仿真参数设置",2)]),e("div",zt,[n[11]||(n[11]=e("div",{class:"box-rectangle"},"4",-1)),e("div",{class:E(["row-content",{isDisable:S.isCalculating,"active-Class":h.value==7}]),onClick:n[5]||(n[5]=v=>j(7))},"计算结果",2)])]),n[13]||(n[13]=e("div",{class:"btnExportReport",style:{display:"none"}},null,-1))])]))}}),Jt=q(Ht,[["__scopeId","data-v-093ab8ea"]]),Wt={class:"project-info"},qt={class:"project-item"},Kt={class:"item-content bgColor-1"},Gt={class:"project-item"},Qt={class:"item-content bgColor-2"},Xt={class:"project-item"},Yt={class:"item-content bgColor-1"},Zt={class:"project-item"},el={class:"item-content bgColor-2"},tl={class:"project-item"},ll={class:"item-content bgColor-1"},ol={class:"project-item"},sl={class:"item-content bgColor-2"},al={class:"project-item"},il={class:"item-content bgColor-1"},nl={class:"project-item"},rl={style:{width:"258px",height:"50px",display:"flex",gap:"10px"}},dl={class:"item-content bgColor-2",style:{width:"155px"}},ul=Z({__name:"ProjectInfo",props:{projectId:{}},setup(S){const r=S;le(async()=>{console.log("the component is now mounted."),await C()}),oe(()=>r.projectId,async j=>{await C()});const C=async()=>{r.projectId!==void 0&&r.projectId>=0&&await g(),await Ae(h)},s=y({id:r.projectId,projectCode:"",createTime:"",modifyDate:"",projectName:"",createUser:"",updateTime:"",simulationTypeOne:"",simulationTypeTwo:"",workDirectory:""}),g=async()=>{var j;if(r.projectId<0){console.error("项目ID无效",r.projectId);return}try{const p=await ce(r.projectId);console.log("项目详情",r.projectId,p),p&&(p.createTime=((j=p.createTime)==null?void 0:j.replace("T"," ").slice(0,19))||"",s.value=p)}catch(p){console.error("获取项目详情失败",p)}},a=async()=>{if(r.projectId<0){P.error("项目无效，无法打开工作目录");return}let j="OpenFolderDialogByEdit",p={cmd:"OpenFolderDialogByEdit",folderPath:s.value.workDirectory,projectId:r.projectId};xe(j,p)},h=async j=>{let p=JSON.parse(j);if(p.cmdCategory==="OpenFolderDialogByEdit"){s.value.workDirectory=p.data.folderPath;try{let m={id:r.projectId,workDirectory:s.value.workDirectory};await Ke(m),P.success("修改工作目录成功")}catch{P.error("修改工作目录失败，请稍后重试")}}};return(j,p)=>{const m=B("el-text");return $(),D("div",Wt,[e("div",qt,[p[1]||(p[1]=e("div",{class:"item-title-box"},[e("div",{class:"item-title"},"项目编码")],-1)),e("div",Kt,R(s.value.projectCode),1)]),e("div",Gt,[p[2]||(p[2]=e("div",{class:"item-title-box",style:{"border-left":"3px solid #FFC700","background-color":"rgba(255,199,0,0.4)"}},[e("div",{class:"item-title"},"创建时间")],-1)),e("div",Qt,R(s.value.createTime),1)]),e("div",Xt,[p[3]||(p[3]=e("div",{class:"item-title-box",style:{"border-left":"3px solid #34FFE7","background-color":"rgba(43,211,194,0.4)"}},[e("div",{class:"item-title"},"修改日期")],-1)),e("div",Yt,R(s.value.updateTime),1)]),e("div",Zt,[p[4]||(p[4]=e("div",{class:"item-title-box",style:{"border-left":"3px solid #00A0E9","background-color":"rgba(0,83,159,0.4)"}},[e("div",{class:"item-title"},"项目名称")],-1)),e("div",el,R(s.value.projectName),1)]),e("div",tl,[p[5]||(p[5]=e("div",{class:"item-title-box",style:{"border-left":"3px solid #00A0E9","background-color":"rgba(0,83,159,0.4)"}},[e("div",{class:"item-title"},"创建人")],-1)),e("div",ll,R(s.value.createUser),1)]),e("div",ol,[p[6]||(p[6]=e("div",{class:"item-title-box",style:{"border-left":"3px solid #FFC700","background-color":"rgba(255,199,0,0.4)"}},[e("div",{class:"item-title"},"仿真类型")],-1)),e("div",sl,R(s.value.simulationTypeOne),1)]),e("div",al,[p[7]||(p[7]=e("div",{class:"item-title-box",style:{"border-left":"3px solid #34FFE7","background-color":"rgba(43,211,194,0.4)"}},[e("div",{class:"item-title"},"仿真类型")],-1)),e("div",il,R(s.value.simulationTypeTwo),1)]),e("div",nl,[p[9]||(p[9]=e("div",{class:"item-title-box",style:{"border-left":"3px solid #00A0E9","background-color":"rgba(0,83,159,0.4)"}},[e("div",{class:"item-title"},"工作目录")],-1)),e("div",rl,[e("div",dl,[_(m,{class:"w-130px mb-2",truncated:"",size:"large",style:{color:"#ffffff"}},{default:O(()=>[de(R(s.value.workDirectory),1)]),_:1})]),e("div",{style:{width:"64px",height:"48px","background-image":"url(/open.png)"},onClick:p[0]||(p[0]=i=>a())}),p[8]||(p[8]=e("div",null,null,-1))])])])}}}),cl=q(ul,[["__scopeId","data-v-af4da8ca"]]),pl={},ml={class:"container"};function vl(S,r){return $(),D("div",ml," 仿真模型 ")}const fl=q(pl,[["render",vl],["__scopeId","data-v-ad90417b"]]),gl={key:0,class:"dialog-container"},wl={class:"dialog-from"},yl={class:"from-mian"},Il={style:{width:"100%",height:"820px",display:"flex"}},xl={class:"mian-body"},bl={class:"table-items"},hl={class:"table-pagination"},$l={style:{width:"85px",height:"80px",display:"flex","align-items":"center"}},jl={class:"from-bottom"},we=10,Cl=Z({__name:"MaterialSelection",props:{visible:{type:Boolean},projectId:{}},setup(S,{emit:r}){const C=S;y(!1),y(!0);const s=y([]),g=y([]),a=n=>{s.value=n.map(v=>v.id),g.value=n},h=y(1),j=y(1),p=r;le(()=>{i(C.projectId)}),oe(()=>C.projectId,async n=>{i(n)});const m=y([]),i=async n=>{if(n!==void 0&&n>=0)try{const v=await Ge(h.value,we);j.value=v.pageCount,m.value=v.list,console.log("获取材料列表成功:",v)}catch(v){console.error("获取材料列表失败:",v)}},o=async n=>{console.log(`current page: ${n}`),await i(C.projectId)},M=()=>{console.log("取消"),p("closeDialog",!1)},F=async()=>{console.log("确认"),await k(),p("closeDialog",!0)},k=async()=>{if(s.value.length===0){console.error("请至少选择一个材料");return}const n=[];s.value.forEach(v=>{const T=m.value.find(I=>I.id===v);T&&n.push({projectId:C.projectId,materialId:T.id,materialName:T.materialName,strengthModelName:T.strengthModelName,strengthModelParameter:T.strengthModelParameter,strengthModelValue:T.strengthModelValue,eosName:T.eosName,eosParameter:T.eosParameter,eosValue:T.eosValue,referenceCount:T.referenceCount,failureModelName:T.failureModelName,failureModelParameter:T.failureModelParameter,failureModelValue:T.failureModelValue})}),console.log("准备添加的材料数据:",n);try{const v=await Qe(n);console.log("添加材料成功:",v),p("closeDialog")}catch(v){console.error("添加材料失败:",v)}};return(n,v)=>{const T=B("el-table-column"),I=B("el-table"),t=B("el-pagination");return n.visible?($(),D("div",gl,[e("div",wl,[e("div",yl,[v[5]||(v[5]=e("div",{class:"mian-header"},"材料选择",-1)),e("div",Il,[e("div",xl,[e("div",bl,[_(I,{data:m.value,style:{width:"100%"},onSelectionChange:a},{default:O(()=>[_(T,{type:"selection",width:"55"}),_(T,{property:"id",label:"材料编号",width:"120"}),_(T,{label:"材料名称",width:"600"},{default:O(U=>[de(R(U.row.materialName),1)]),_:1}),_(T,{property:"strengthModelName",label:"本构方程",width:"295"}),_(T,{property:"eosName",label:"状态方程",width:"295"})]),_:1},8,["data"])]),e("div",hl,[_(t,{background:"",layout:"prev, pager, next",total:j.value,"page-size":we,"onUpdate:pageSize":v[0]||(v[0]=U=>we=U),"current-page":h.value,"onUpdate:currentPage":v[1]||(v[1]=U=>h.value=U),onCurrentChange:o},null,8,["total","current-page"])])]),e("div",$l,[e("div",{style:{height:"58px",width:"58px","margin-left":"10px"},onClick:v[2]||(v[2]=U=>M())})])])]),e("div",jl,[e("div",{class:"btn-cancel",onClick:v[3]||(v[3]=U=>M())}),e("div",{class:"btn-confirm",onClick:v[4]||(v[4]=U=>F())})])])])):ue("",!0)}}}),Ml=q(Cl,[["__scopeId","data-v-1f0665fc"]]),_l={class:"container"},kl={class:"top-container"},Vl={style:{width:"100%",height:"32px",display:"flex","justify-content":"flex-end"}},Tl={class:"material-list-box"},Dl={class:"material-list"},Pl=["onClick"],Sl={class:"item-left"},Ll={class:"item-right"},Ul=["onClick"],Nl={style:{display:"flex","align-items":"center"}},Fl=["onClick"],Ol={class:"material-pagination"},El={class:"bottom-container"},Bl={class:"bottom-container-box"},Al={class:"material-property-header",style:{"background-color":"#00539F"}},Rl={class:"material-property-header"},zl={class:"property-value"},Hl={class:"property-value"},Jl={class:"property-name"},Wl={class:"property-value border-left"},ql=["onUpdate:modelValue","onInput"],Kl={class:"property-value"},Gl={class:"property-name"},Ql={class:"property-value border-left"},Xl=["onUpdate:modelValue","onInput"],Yl={class:"property-value"},Zl={class:"property-name"},eo={class:"property-value border-left"},to=["onUpdate:modelValue","onInput"],lo={class:"dialog-footer"},oo={class:"dialog-footer"},ye=10,so=Z({__name:"MaterialSettings",props:{projectId:{}},setup(S){const r=y(1),C=y(1),s=S;le(()=>{h(s.projectId)}),oe(()=>s.projectId,async x=>{h(x)});const g=y([]),a=y(null),h=async x=>{if(x!==void 0&&x>=0)try{const d=await Ne(x,r.value,ye);C.value=d.pageCount,g.value=d.list,d.list&&d.list.length>0&&(F.value=d.list[0].id,U(d.list[0])),console.log("getMaterialItems:",d)}catch(d){console.error("getMaterialItems:",d)}},j=async x=>{console.log(`current page: ${x}`),await h(s.projectId)},p=y(!1),m=async()=>{await pe(),p.value=!0,console.log("新建项目")},i=async x=>{x&&await h(s.projectId),p.value=!1,await Ie()},o=y(!1),M=y(!1),F=y(null),k=x=>{console.log("删除材料项",x),o.value=!0,F.value=x},n=async()=>{await Ye(F.value),await h(s.projectId),o.value=!1},v=me({id:0,projectId:0,materialName:""}),T=x=>{M.value=!0,F.value=x;const d=g.value.find(H=>H.id===x);console.log("编辑材料项",d),d&&(v.id=d.id,v.projectId=d.projectId,v.materialName=d.materialName)},I=async()=>{await Ze(v),await h(s.projectId),M.value=!1},t=x=>{console.log("选中材料项ID:",x),F.value=x;const d=g.value.find(H=>H.id===x);U(d)},U=x=>{let d=[],H=[],K=[],N=x.strengthModelParameter.split(","),Y=x.strengthModelValue.split(",");for(let A=0;A<N.length;A++){let se=N[A]||"",ae=Y[A]||"";d.push({parameter:se,value:ae})}let re=x.eosParameter.split(","),te=x.eosValue.split(",");for(let A=0;A<re.length;A++){let se=re[A]||"",ae=te[A]||"";H.push({parameter:se,value:ae})}let ve=x.failureModelParameter.split(","),fe=x.failureModelValue.split(",");for(let A=0;A<ve.length;A++){let se=ve[A]||"",ae=fe[A]||"";K.push({parameter:se,value:ae})}x.strengthList=d,x.eosList=H,x.failureList=K,a.value=x},w=y(!1),l=y(!1),f=y(!1),u=()=>{if(s.projectId===null||s.projectId<=0){P.error("没有选择项目，请创建项目再保存.");return}let x=w.value;w.value=!x},c=()=>{let x=l.value;l.value=!x},z=()=>{let x=f.value;f.value=!x},X=(x,d,H,K)=>{let N=a.value;N&&(x==="strength"&&N.strengthList?(N.strengthList[d][H]=K,N.strengthModelValue=N.strengthList.map(Y=>Y.value).join(",")):x==="eos"&&N.eosList?(N.eosList[d][H]=K,N.eosValue=N.eosList.map(Y=>Y.value).join(",")):x==="failure"&&N.failureList&&(N.failureList[d][H]=K,N.failureModelValue=N.failureList.map(Y=>Y.value).join(",")),console.log("Updated model after value change:",N),a.value=N)},W=async()=>{if(a.value)try{let x=a.value;await Xe(x.id,x),P.success("材料项修改成功")}catch(x){console.error("Error saving material item changes:",x),P.error("保存材料项修改时出错")}};return(x,d)=>{var fe,A,se,ae,he,$e,je,Ce,Me,_e,ke,Ve,Te;const H=B("el-pagination"),K=B("el-divider"),N=B("el-button"),Y=B("el-dialog"),re=B("el-input"),te=B("el-form-item"),ve=B("el-form");return $(),D(J,null,[e("div",_l,[e("div",kl,[e("div",Vl,[e("div",{style:{width:"70px",height:"32px"},onClick:d[0]||(d[0]=b=>m())})]),e("div",Tl,[e("div",Dl,[d[15]||(d[15]=e("div",{class:"material-item",style:{"background-color":"#043272"}},[e("div",{class:"item-left"},"材料名称"),e("div",{class:"item-right"},"操作")],-1)),($(!0),D(J,null,Q(g.value,b=>($(),D("div",{class:E(["material-item",b.id==F.value?"activeClass":""]),key:b.id,onClick:ee=>t(b.id)},[e("div",Sl,R(b.materialName),1),e("div",Ll,[e("div",{style:{display:"flex","align-items":"center"},onClick:De(ee=>T(b.id),["stop"])},d[14]||(d[14]=[e("img",{src:et,alt:"local-icon",style:{width:"24px",height:"24px"}},null,-1)]),8,Ul),e("div",Nl,[e("img",{src:tt,alt:"local-icon",style:{width:"24px",height:"24px"},onClick:De(ee=>k(b.id),["stop"])},null,8,Fl)])])],10,Pl))),128))]),e("div",Ol,[_(H,{background:"",layout:"prev, pager, next",total:C.value,"current-page":r.value,"onUpdate:currentPage":d[1]||(d[1]=b=>r.value=b),"page-size":ye,"onUpdate:pageSize":d[2]||(d[2]=b=>ye=b),onCurrentChange:j},null,8,["total","current-page"])])])]),e("div",El,[e("div",Bl,[e("div",Al,[d[16]||(d[16]=e("div",{class:"property-name",style:{width:"100%"}},[e("span",{style:{color:"red","font-size":"16px"}},"参数单位: cm-g-us")],-1)),e("div",{class:"property-name",style:{"text-align":"right","font-weight":"bold"},onClick:d[3]||(d[3]=b=>W())},"保存")]),e("div",Rl,[d[17]||(d[17]=e("div",{class:"property-name"},"材料名称",-1)),e("div",zl,R((fe=a.value)==null?void 0:fe.materialName),1)]),e("div",{class:"material-property-title",onClick:d[4]||(d[4]=b=>u())},[d[18]||(d[18]=e("div",{class:"property-name"},"本构方程",-1)),e("div",Hl,R((A=a.value)==null?void 0:A.strengthModelName),1)]),((ae=(se=a.value)==null?void 0:se.strengthList)==null?void 0:ae.length)>0?($(!0),D(J,{key:0},Q((he=a.value)==null?void 0:he.strengthList,(b,ee)=>V(($(),D("div",{class:"material-property",key:ee},[e("div",Jl,R(b==null?void 0:b.parameter),1),e("div",Wl,[V(e("input",{class:"item-value","onUpdate:modelValue":ie=>b.value=ie,onInput:ie=>X("strength",ee,"value",b.value),placeholder:"Value"},null,40,ql),[[L,b.value]])])])),[[ne,w.value]])),128)):ue("",!0),_(K,{style:{margin:"0"}}),e("div",{class:"material-property-title",onClick:d[5]||(d[5]=b=>c())},[d[19]||(d[19]=e("div",{class:"property-name"},"状态方程",-1)),e("div",Kl,R(($e=a.value)==null?void 0:$e.eosName),1)]),((Ce=(je=a.value)==null?void 0:je.eosList)==null?void 0:Ce.length)>0?($(!0),D(J,{key:1},Q((Me=a.value)==null?void 0:Me.eosList,(b,ee)=>V(($(),D("div",{class:"material-property",key:ee},[e("div",Gl,R(b==null?void 0:b.parameter),1),e("div",Ql,[V(e("input",{class:"item-value","onUpdate:modelValue":ie=>b.value=ie,onInput:ie=>X("eos",ee,"value",b.value),placeholder:"Value"},null,40,Xl),[[L,b.value]])])])),[[ne,l.value]])),128)):ue("",!0),_(K,{style:{margin:"0"}}),e("div",{class:"material-property-title",onClick:d[6]||(d[6]=b=>z())},[d[20]||(d[20]=e("div",{class:"property-name"},"失效模型",-1)),e("div",Yl,R((_e=a.value)==null?void 0:_e.failureModelName),1)]),((Ve=(ke=a.value)==null?void 0:ke.failureList)==null?void 0:Ve.length)>0?($(!0),D(J,{key:2},Q((Te=a.value)==null?void 0:Te.failureList,(b,ee)=>V(($(),D("div",{class:"material-property",key:ee},[e("div",Zl,R(b==null?void 0:b.parameter),1),e("div",eo,[V(e("input",{class:"item-value","onUpdate:modelValue":ie=>b.value=ie,onInput:ie=>X("failure",ee,"value",b.value),placeholder:"Value"},null,40,to),[[L,b.value]])])])),[[ne,f.value]])),128)):ue("",!0)])])]),_(Ml,{visible:p.value,projectId:s.projectId,onCloseDialog:i},null,8,["visible","projectId"]),_(Y,{modelValue:o.value,"onUpdate:modelValue":d[9]||(d[9]=b=>o.value=b),title:"删除",width:"500",class:E("test-dialog")},{footer:O(()=>[e("div",lo,[_(N,{onClick:d[7]||(d[7]=b=>o.value=!1)},{default:O(()=>d[21]||(d[21]=[de("取消")])),_:1}),_(N,{type:"primary",onClick:d[8]||(d[8]=b=>n())},{default:O(()=>d[22]||(d[22]=[de(" 确定 ")])),_:1})])]),default:O(()=>[d[23]||(d[23]=e("span",null,"确定删除该材料项吗？",-1))]),_:1},8,["modelValue"]),_(Y,{modelValue:M.value,"onUpdate:modelValue":d[13]||(d[13]=b=>M.value=b),title:"修改",width:"500",class:E("test-dialog")},{footer:O(()=>[e("div",oo,[_(N,{onClick:d[11]||(d[11]=b=>M.value=!1)},{default:O(()=>d[24]||(d[24]=[de("取消")])),_:1}),_(N,{type:"primary",onClick:d[12]||(d[12]=b=>I())},{default:O(()=>d[25]||(d[25]=[de(" 确定 ")])),_:1})])]),default:O(()=>[_(ve,{model:v},{default:O(()=>[_(te,{label:"材料名称","label-width":"140px"},{default:O(()=>[_(re,{modelValue:v.materialName,"onUpdate:modelValue":d[10]||(d[10]=b=>v.materialName=b),autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])],64)}}}),ao=q(so,[["__scopeId","data-v-e9f06e08"]]),io={class:"container"},no={class:"list-box"},ro={class:"row-list"},uo={class:"row-item"},co={class:"item-text",style:{width:"200px"}},po={class:"row-item"},mo={class:"item-text",style:{width:"200px"}},vo={class:"row-item"},fo={class:"item-text",style:{padding:"0px 0px"}},go={class:"row-item"},wo={class:"item-text",style:{width:"200px"}},yo={class:"row-item"},Io={class:"item-text",style:{width:"200px"}},xo={class:"row-item"},bo={class:"item-text",style:{padding:"0px 0px"}},ho={class:"row-item"},$o={class:"item-text",style:{width:"120px"}},jo={class:"row-item"},Co={class:"item-text",style:{width:"120px"}},Mo={class:"row-item"},_o={class:"item-text",style:{width:"200px"}},ko={class:"row-item"},Vo={class:"item-text",style:{width:"200px"}},To={class:"row-item"},Do={class:"item-text",style:{width:"140px"}},Po={class:"row-item"},So={class:"item-text",style:{width:"140px"}},Lo={class:"row-item"},Uo={class:"item-text",style:{padding:"0px 0px"}},No=Z({__name:"StructureModel",props:{projectId:{},show:{type:Boolean}},setup(S){const r=S;le(async()=>{console.log("the component is now mounted."),await C()}),oe(()=>r.projectId,async I=>{I!==void 0&&I>=0&&await C()});const C=async()=>{if(r.projectId<=0){console.error("项目ID无效",r.projectId);return}await h(r.projectId),await p(r.projectId),await F(r.projectId)},s=(I,t)=>{t&&t.target&&t.target.value!==void 0&&(I.indexOf("fwcellInfo.")===0?(I=I.replace("fwcellInfo.",""),a.fwcellInfo[I]=t.target.value.replace(/[^\d]/g,"")):a[I]=t.target.value.replace(/[^\d]/g,""))},g=(I,t)=>{t&&t.target&&t.target.value!==void 0&&(I.indexOf("fwcellInfo.")===0?(I=I.replace("fwcellInfo.",""),a.fwcellInfo[I]=t.target.value.replace(/[^0-9.]/g,"").replace(/(\.\d*)\./g,"$1")):a[I]=t.target.value.replace(/[^0-9.]/g,"").replace(/(\.\d*)\./g,"$1"))},a=me({id:0,projectId:r.projectId,topTier:null,topThickness:null,topMaterialItemId:null,bottomTier:null,bottomThickness:null,bottomMaterialItemId:null,fwcellInfo:{id:0,innerTopLength:null,innerBottomLength:null,thickness:null,height:null,xCount:null,yCount:null,fwcellMaterialItemId:null}}),h=async I=>{try{const t=await be(I);t&&(a.id=t.id,a.projectId=t.projectId,a.topTier=t.topTier,a.topThickness=t.topThickness,a.topMaterialItemId=t.topMaterialItemId,a.bottomTier=t.bottomTier,a.bottomThickness=t.bottomThickness,a.bottomMaterialItemId=t.bottomMaterialItemId,a.fwcellInfo.id=t.fwcellInfo.id,a.fwcellInfo.innerTopLength=t.fwcellInfo.innerTopLength,a.fwcellInfo.innerBottomLength=t.fwcellInfo.innerBottomLength,a.fwcellInfo.thickness=t.fwcellInfo.thickness,a.fwcellInfo.height=t.fwcellInfo.height,a.fwcellInfo.xCount=t.fwcellInfo.xCount,a.fwcellInfo.yCount=t.fwcellInfo.yCount,a.fwcellInfo.fwcellMaterialItemId=t.fwcellInfo.fwcellMaterialItemId,m.value=t.topMaterialItemId,i.value=t.bottomMaterialItemId,o.value=t.fwcellInfo.fwcellMaterialItemId)}catch(t){console.error("获取项目详情失败",t)}},j=y(""),p=async I=>{try{const t=await ce(I);t&&(j.value=t.workDirectory)}catch(t){console.error("获取项目详情失败",t)}},m=y(null),i=y(null),o=y(null),M=y([]),F=async I=>{try{const t=await Oe(I);let U=[];t&&t.length>0&&t.forEach(w=>{let l={label:w.materialName,value:w.id};U.push(l)}),M.value=U}catch(t){console.error("获取材料项失败",t)}},k=y(!1);let n=null;const v=async()=>{if(!k.value){if(k.value=!0,n||(n=Se.service({lock:!0,text:"生成模型中，请稍后...",background:"rgba(0, 0, 0, 0.7)"})),a.projectId===null||a.projectId<=0){P.error("没有选择项目，请创建项目再保存."),k.value=!1,n.close();return}a.topMaterialItemId=m.value,a.bottomMaterialItemId=i.value,a.fwcellInfo.fwcellMaterialItemId=o.value;try{if(!T(a)){P.error("请输入所有输入框内容再保存."),k.value=!1,n.close();return}await jt(a);let I=lt(a);if(I.folderPath=j.value,!I.folderPath||I.folderPath==""){P.error("请选择生成tg的文件夹."),n.close(),k.value=!1;return}let U={cmd:"CreateTgFile",jsonData:JSON.stringify(I)},w=JSON.stringify(U);window.chrome&&window.chrome.webview&&window.chrome.webview.postMessage(w)}catch{n.close()}k.value=!1}};typeof window<"u"&&window.chrome&&window.chrome.webview&&typeof window.chrome.webview.addEventListener=="function"&&window.chrome.webview.addEventListener("message",I=>{let t=JSON.parse(I.data);t.cmdCategory==="CreateTgFile"&&(t.success?P.success(t.message):P.error(t.message),(t.success&&t.message==="模型加载成功"||t.success==!1)&&n&&n.close())});const T=I=>{const t=["projectId","topTier","tophickness","bottomTier","bottomThickness","topMaterialItemId","bottomMaterialItemId"];for(const w of t)if(I[w]===null||I[w]==="")return!1;const U=Object.keys(I.fwcellInfo);for(const w of U)if(I.fwcellInfo[w]===null||I.fwcellInfo[w]==="")return!1;return!0};return(I,t)=>{const U=B("el-option"),w=B("el-select");return $(),D("div",io,[e("div",no,[e("div",ro,[t[47]||(t[47]=He('<div class="row-item" data-v-1970d774><div class="rectangle" data-v-1970d774></div><div style="color:#97CDFF;" data-v-1970d774>弹体模型</div></div><div class="row-item-image" data-v-1970d774></div><div class="row-item" data-v-1970d774><div class="rectangle" data-v-1970d774></div><div style="color:#97CDFF;" data-v-1970d774>上复合板建模</div></div>',3)),e("div",uo,[t[24]||(t[24]=e("div",{class:"item-prefix"},"层数",-1)),e("div",co,[V(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=l=>a.topTier=l),onInput:t[1]||(t[1]=l=>s("topTier",l))},null,544),[[L,a.topTier]])]),t[25]||(t[25]=e("div",{class:"item-suffix"},"层",-1))]),e("div",po,[t[26]||(t[26]=e("div",{class:"item-prefix"},"层厚度",-1)),e("div",mo,[V(e("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=l=>a.topThickness=l),onInput:t[3]||(t[3]=l=>g("tophickness",l))},null,544),[[L,a.topThickness]])]),t[27]||(t[27]=e("div",{class:"item-suffix"},"mm",-1))]),e("div",vo,[t[28]||(t[28]=e("div",{class:"item-prefix"},"材料名称",-1)),e("div",fo,[_(w,{modelValue:m.value,"onUpdate:modelValue":t[4]||(t[4]=l=>m.value=l),clearable:"",placeholder:"请选择",style:{width:"240px",color:"white"},class:E("custom-select")},{default:O(()=>[($(!0),D(J,null,Q(M.value,l=>($(),G(U,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])])]),t[48]||(t[48]=e("div",{class:"row-item"},[e("div",{class:"rectangle"}),e("div",{style:{color:"#97CDFF"}},"下复合板建模")],-1)),e("div",go,[t[29]||(t[29]=e("div",{class:"item-prefix"},"层数",-1)),e("div",wo,[V(e("input",{type:"text","onUpdate:modelValue":t[5]||(t[5]=l=>a.bottomTier=l),onInput:t[6]||(t[6]=l=>s("bottomTier",l))},null,544),[[L,a.bottomTier]])]),t[30]||(t[30]=e("div",{class:"item-suffix"},"层",-1))]),e("div",yo,[t[31]||(t[31]=e("div",{class:"item-prefix"},"层厚度",-1)),e("div",Io,[V(e("input",{type:"text","onUpdate:modelValue":t[7]||(t[7]=l=>a.bottomThickness=l),onInput:t[8]||(t[8]=l=>g("bottomThickness",l))},null,544),[[L,a.bottomThickness]])]),t[32]||(t[32]=e("div",{class:"item-suffix"},"mm",-1))]),e("div",xo,[t[33]||(t[33]=e("div",{class:"item-prefix"},"材料名称",-1)),e("div",bo,[_(w,{modelValue:i.value,"onUpdate:modelValue":t[9]||(t[9]=l=>i.value=l),clearable:"",placeholder:"请选择",style:{width:"240px",color:"white"},class:E("custom-select")},{default:O(()=>[($(!0),D(J,null,Q(M.value,l=>($(),G(U,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])])]),t[49]||(t[49]=e("div",{class:"row-item"},[e("div",{class:"rectangle"}),e("div",{style:{color:"#97CDFF"}},"胞元建模")],-1)),e("div",ho,[t[34]||(t[34]=e("div",{class:"item-prefix",style:{width:"144px"}},"胞元内六角上边长",-1)),e("div",$o,[V(e("input",{type:"text","onUpdate:modelValue":t[10]||(t[10]=l=>a.fwcellInfo.innerTopLength=l),onInput:t[11]||(t[11]=l=>g("fwcellInfo.innerTopLength",l))},null,544),[[L,a.fwcellInfo.innerTopLength]])]),t[35]||(t[35]=e("div",{class:"item-suffix"},"mm",-1))]),e("div",jo,[t[36]||(t[36]=e("div",{class:"item-prefix",style:{width:"144px"}},"胞元内六角下边长",-1)),e("div",Co,[V(e("input",{type:"text","onUpdate:modelValue":t[12]||(t[12]=l=>a.fwcellInfo.innerBottomLength=l),onInput:t[13]||(t[13]=l=>g("fwcellInfo.innerBottomLength",l))},null,544),[[L,a.fwcellInfo.innerBottomLength]])]),t[37]||(t[37]=e("div",{class:"item-suffix"},"mm",-1))]),e("div",Mo,[t[38]||(t[38]=e("div",{class:"item-prefix"},"胞元壁厚",-1)),e("div",_o,[V(e("input",{type:"text","onUpdate:modelValue":t[14]||(t[14]=l=>a.fwcellInfo.thickness=l),onInput:t[15]||(t[15]=l=>g("fwcellInfo.thickness",l))},null,544),[[L,a.fwcellInfo.thickness]])]),t[39]||(t[39]=e("div",{class:"item-suffix"},"mm",-1))]),e("div",ko,[t[40]||(t[40]=e("div",{class:"item-prefix"},"胞元高度",-1)),e("div",Vo,[V(e("input",{type:"text","onUpdate:modelValue":t[16]||(t[16]=l=>a.fwcellInfo.height=l),onInput:t[17]||(t[17]=l=>g("fwcellInfo.height",l))},null,544),[[L,a.fwcellInfo.height]])]),t[41]||(t[41]=e("div",{class:"item-suffix"},"mm",-1))]),e("div",To,[t[42]||(t[42]=e("div",{class:"item-prefix",style:{width:"124px"}},"蜂窝横向胞元数",-1)),e("div",Do,[V(e("input",{type:"text","onUpdate:modelValue":t[18]||(t[18]=l=>a.fwcellInfo.xCount=l),onInput:t[19]||(t[19]=l=>s("fwcellInfo.xCount",l))},null,544),[[L,a.fwcellInfo.xCount]])]),t[43]||(t[43]=e("div",{class:"item-suffix"},null,-1))]),e("div",Po,[t[44]||(t[44]=e("div",{class:"item-prefix",style:{width:"124px"}},"蜂窝横向胞元数",-1)),e("div",So,[V(e("input",{type:"text","onUpdate:modelValue":t[20]||(t[20]=l=>a.fwcellInfo.yCount=l),onInput:t[21]||(t[21]=l=>s("fwcellInfo.yCount",l))},null,544),[[L,a.fwcellInfo.yCount]])]),t[45]||(t[45]=e("div",{class:"item-suffix"},null,-1))]),e("div",Lo,[t[46]||(t[46]=e("div",{class:"item-prefix"},"材料名称",-1)),e("div",Uo,[_(w,{modelValue:o.value,"onUpdate:modelValue":t[22]||(t[22]=l=>o.value=l),clearable:"",placeholder:"请选择",style:{width:"240px",color:"white"},class:E("custom-select")},{default:O(()=>[($(!0),D(J,null,Q(M.value,l=>($(),G(U,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])])])])]),e("div",{class:"btn-box",onClick:t[23]||(t[23]=l=>v())})])}}}),Fo=q(No,[["__scopeId","data-v-1970d774"]]),Oo={class:"container"},Eo={class:"list-box"},Bo={class:"tabClass",style:{display:"none"}},Ao={class:"row-list"},Ro={class:"row-item"},zo={class:"item-text",style:{padding:"0px 0px"}},Ho={class:"row-item"},Jo={class:"item-text",style:{width:"200px"}},Wo={class:"row-item"},qo={class:"item-text",style:{width:"200px"}},Ko={class:"row-item"},Go={class:"item-text"},Qo={class:"row-list"},Xo={class:"row-item"},Yo={class:"item-text",style:{padding:"0px 0px",width:"200px"}},Zo={class:"row-item"},es={class:"item-text",style:{padding:"0px 0px",width:"200px"}},ts={class:"row-item"},ls={class:"item-text",style:{padding:"0px 0px",width:"200px"}},os={class:"row-item"},ss={class:"item-text",style:{padding:"0px 0px",width:"200px"}},as=Z({__name:"AmmoModeling",props:{projectId:{}},setup(S){const r=S;le(async()=>{await C()}),oe(()=>r.projectId,async w=>{w!==void 0&&w>=0&&await g()});const C=async()=>{if(r.projectId<0||r.projectId===void 0){console.error("项目ID无效",r.projectId);return}await g(),await U(r.projectId),await m(r.projectId),await Ae(i)},s=me({id:0,projectId:r.projectId,warbodyType:null,targetPlatesLengthOne:null,targetPlatesLengthTwo:null,warbodyLength:null,oneMaterialItemId:null,twoMaterialItemId:null,threeMaterialItemId:null}),g=async()=>{if(r.projectId<0){console.error("项目ID无效",r.projectId);return}try{const w=await Fe(r.projectId);console.log("弹体详情",r.projectId,w),w&&(F.value=w.warbodyType,s.id=w.id,s.projectId=w.projectId,s.warbodyType=w.warbodyType,s.targetPlatesLengthOne=w.targetPlatesLengthOne,s.targetPlatesLengthTwo=w.targetPlatesLengthTwo,s.warbodyLength=w.warbodyLength,s.oneMaterialItemId=w.oneMaterialItemId,s.twoMaterialItemId=w.twoMaterialItemId,s.threeMaterialItemId=w.threeMaterialItemId,v.value=w.oneMaterialItemId,T.value=w.twoMaterialItemId,I.value=w.threeMaterialItemId)}catch(w){console.error("获取项目详情失败",w)}},a=y(!1);let h=null;const j=async()=>{if(!a.value){if(a.value=!0,h||(h=Se.service({lock:!0,text:"生成模型中，请稍后...",background:"rgba(0, 0, 0, 0.7)"})),s.projectId===null||s.projectId<=0){P.error("没有选择项目，请创建项目再保存."),a.value=!1,h.close();return}if(v.value===null||T.value===null||I.value===null||v.value===0||T.value===0||I.value===0){P.error("请选择材料."),a.value=!1,h.close();return}try{if(s.warbodyType=F.value,s.oneMaterialItemId=v.value,s.twoMaterialItemId=T.value,s.threeMaterialItemId=I.value,await ot(s),P.success("弹体模型保存成功"),!p.value||p.value==""){P.error("请选择生成tg的文件夹."),h.close();return}xe("LoadWarBodyModel",{folderPath:p.value})}catch{P.error("弹体模型保存失败，请稍后再试."),h.close()}finally{a.value=!1}}},p=y(""),m=async w=>{try{const l=await ce(w);l&&(p.value=l.workDirectory)}catch(l){console.error("获取项目详情失败",l)}},i=async w=>{let l=JSON.parse(w);l.cmdCategory==="LoadWarBodyModel"&&(l.success?P.success(l.message):P.error(l.message),h&&h.close())},o=y(1),M=w=>{o.value=w,console.log(o.value)},F=y(0),k=[{label:"截锥",value:0},{label:"圆柱形",value:1},{label:"卵形弹",value:2}],n=[{label:"7.62毫米子弹",value:0}],v=y(null),T=y(null),I=y(null),t=y([]),U=async w=>{try{const l=await Oe(w);let f=[];l&&l.length>0&&l.forEach(u=>{let c={label:u.materialName,value:u.id};f.push(c)}),t.value=f}catch(l){console.error("获取材料列表失败",l)}};return(w,l)=>{const f=B("el-option"),u=B("el-select");return $(),D("div",Oo,[e("div",Eo,[e("div",Bo,[e("div",{class:E(o.value==0?"tab-selected":""),onClick:l[0]||(l[0]=c=>M(0))},"参数化弹体",2),e("div",{class:E(o.value!=0?"tab-selected":""),onClick:l[1]||(l[1]=c=>M(1))},"制式弹体",2)]),V(e("div",Ao,[l[17]||(l[17]=e("div",{class:"row-item"},[e("div",{class:"rectangle"}),e("div",{style:{color:"#97CDFF"}},"弹体模型")],-1)),l[18]||(l[18]=e("div",{class:"row-item-image"},null,-1)),e("div",Ro,[l[11]||(l[11]=e("div",{class:"item-prefix"},"弹体类型",-1)),e("div",zo,[_(u,{modelValue:F.value,"onUpdate:modelValue":l[2]||(l[2]=c=>F.value=c),clearable:"",placeholder:"请选择",style:{width:"240px",color:"white"},class:E("custom-select")},{default:O(()=>[($(),D(J,null,Q(k,c=>_(f,{key:c.value,label:c.label,value:c.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])])]),e("div",Ho,[l[12]||(l[12]=e("div",{class:"item-prefix"},"靶板长度",-1)),e("div",Jo,[V(e("input",{type:"text","onUpdate:modelValue":l[3]||(l[3]=c=>s.targetPlatesLengthOne=c)},null,512),[[L,s.targetPlatesLengthOne]])]),l[13]||(l[13]=e("div",{class:"item-suffix"},"厘米",-1))]),e("div",Wo,[l[14]||(l[14]=e("div",{class:"item-prefix"},"靶板长度",-1)),e("div",qo,[V(e("input",{type:"text","onUpdate:modelValue":l[4]||(l[4]=c=>s.targetPlatesLengthTwo=c)},null,512),[[L,s.targetPlatesLengthTwo]])]),l[15]||(l[15]=e("div",{class:"item-suffix"},"厘米",-1))]),e("div",Ko,[l[16]||(l[16]=e("div",{class:"item-prefix"},"弹体长度",-1)),e("div",Go,[V(e("input",{type:"text","onUpdate:modelValue":l[5]||(l[5]=c=>s.warbodyLength=c)},null,512),[[L,s.warbodyLength]])])]),l[19]||(l[19]=e("div",{class:"row-item"},[e("div",{class:"item-prefix"},"材料名称")],-1))],512),[[ne,o.value==0]]),V(e("div",Qo,[l[24]||(l[24]=e("div",{class:"row-item"},[e("div",{class:"rectangle"}),e("div",{style:{color:"#97CDFF"}},"弹体模型")],-1)),l[25]||(l[25]=e("div",{class:"row-item-image",style:{"background-image":"url( /bullet2.png)"}},null,-1)),e("div",Xo,[l[20]||(l[20]=e("div",{class:"item-prefix",style:{width:"100px"}},"弹体类型",-1)),e("div",Yo,[_(u,{modelValue:F.value,"onUpdate:modelValue":l[6]||(l[6]=c=>F.value=c),clearable:"",placeholder:"请选择",style:{width:"200px",color:"white"},class:E("custom-select")},{default:O(()=>[($(),D(J,null,Q(n,c=>_(f,{key:c.value,label:c.label,value:c.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])])]),e("div",Zo,[l[21]||(l[21]=e("div",{class:"item-prefix",style:{width:"100px"}},"81被甲材料",-1)),e("div",es,[_(u,{modelValue:v.value,"onUpdate:modelValue":l[7]||(l[7]=c=>v.value=c),clearable:"",placeholder:"请选择",style:{width:"200px",color:"white"},class:E("custom-select")},{default:O(()=>[($(!0),D(J,null,Q(t.value,c=>($(),G(f,{key:c.value,label:c.label,value:c.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])])]),e("div",ts,[l[22]||(l[22]=e("div",{class:"item-prefix",style:{width:"100px"}},"82尖头材料",-1)),e("div",ls,[_(u,{modelValue:T.value,"onUpdate:modelValue":l[8]||(l[8]=c=>T.value=c),clearable:"",placeholder:"请选择",style:{width:"200px",color:"white"},class:E("custom-select")},{default:O(()=>[($(!0),D(J,null,Q(t.value,c=>($(),G(f,{key:c.value,label:c.label,value:c.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])])]),e("div",os,[l[23]||(l[23]=e("div",{class:"item-prefix",style:{width:"100px"}},"83弹芯材料",-1)),e("div",ss,[_(u,{modelValue:I.value,"onUpdate:modelValue":l[9]||(l[9]=c=>I.value=c),clearable:"",placeholder:"请选择",style:{width:"200px",color:"white"},class:E("custom-select")},{default:O(()=>[($(!0),D(J,null,Q(t.value,c=>($(),G(f,{key:c.value,label:c.label,value:c.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])])])],512),[[ne,o.value!=0]])]),e("div",{class:"btn-box",onClick:l[10]||(l[10]=c=>j())})])}}}),is=q(as,[["__scopeId","data-v-fb2297b8"]]),ns={class:"container"},rs={class:"row-list"},ds={class:"row-item"},us={class:"item-text",style:{width:"180px"}},cs={class:"row-item"},ps={class:"item-text",style:{width:"100px"}},ms={class:"row-item"},vs={class:"item-text",style:{width:"100px"}},fs={class:"row-item"},gs={class:"item-text",style:{width:"100px"}},ws={class:"row-item"},ys={class:"item-text",style:{width:"100px"}},Is={class:"row-item"},xs={class:"item-text",style:{width:"100px"}},bs=Z({__name:"SimulationParameterSettings",props:{projectId:{}},setup(S){const r=S;le(async()=>{console.log("the component is now mounted."),await g()}),oe(()=>r.projectId,async m=>{m!==void 0&&m>=0&&await g()});const C=(m,i)=>{i&&i.target&&i.target.value!==void 0&&(s[m]=i.target.value.replace(/[^0-9.]/g,"").replace(/(\.\d*)\./g,"$1"))},s=me({id:0,projectId:r.projectId,speed:null,tssfac:null,d3plots:null,slsfac:null,endtim:null,dt:null}),g=async()=>{if(r.projectId<0){console.error("项目ID无效",r.projectId);return}try{const m=await Ue(r.projectId);console.log("仿真参数设置",r.projectId,m),m&&(p.value=m.speedDirection,s.id=m.id,s.projectId=m.projectId,s.speed=m.speed,s.tssfac=m.tssfac,s.d3plots=m.d3plots,s.slsfac=m.slsfac,s.endtim=m.endtim,s.dt=m.dt)}catch(m){console.error("获取项目详情失败",m)}},a=y(!1),h=async()=>{if(!a.value){if(a.value=!0,s.projectId===null||s.projectId<=0){P.error("没有选择项目，请创建项目再保存."),a.value=!1;return}try{if(!j(s)){P.error("请输入所有输入框内容再保存."),a.value=!1;return}await st(s),P({showClose:!0,message:"保存成功",type:"success"})}catch{P.error("保存失败，请稍后重试")}a.value=!1}},j=m=>{const i=["projectId","speed","tssfac","d3plots","slsfac","endtim","dt"];for(const o of i)if(m[o]===null||m[o]==="")return!1;return!0},p=y(2);return(m,i)=>($(),D("div",ns,[e("div",rs,[i[25]||(i[25]=e("div",{class:"row-item"},[e("div",{class:"rectangle"}),e("div",{style:{color:"#97CDFF"}},"初始条件")],-1)),e("div",ds,[i[13]||(i[13]=e("div",{class:"item-prefix"},"速度",-1)),e("div",us,[V(e("input",{type:"text","onUpdate:modelValue":i[0]||(i[0]=o=>s.speed=o),onInput:i[1]||(i[1]=o=>C("speed",o))},null,544),[[L,s.speed]])]),i[14]||(i[14]=e("div",{class:"item-suffix",style:{width:"40px"}},"米/秒",-1))]),i[26]||(i[26]=e("div",{class:"row-item"},[e("div",{class:"rectangle"}),e("div",{style:{color:"#97CDFF"}},"输出控制参数")],-1)),e("div",cs,[i[15]||(i[15]=e("div",{class:"item-prefix",style:{width:"140px"}},"时间步长(tssfac)",-1)),e("div",ps,[V(e("input",{type:"text","onUpdate:modelValue":i[2]||(i[2]=o=>s.tssfac=o),onInput:i[3]||(i[3]=o=>C("tssfac",o))},null,544),[[L,s.tssfac]])]),i[16]||(i[16]=e("div",{class:"item-suffix"},null,-1))]),e("div",ms,[i[17]||(i[17]=e("div",{class:"item-prefix",style:{width:"140px"}},"输出间隔(D3PLOT)",-1)),e("div",vs,[V(e("input",{type:"text","onUpdate:modelValue":i[4]||(i[4]=o=>s.d3plots=o),onInput:i[5]||(i[5]=o=>C("d3plots",o))},null,544),[[L,s.d3plots]])]),i[18]||(i[18]=e("div",{class:"item-suffix"},null,-1))]),e("div",fs,[i[19]||(i[19]=e("div",{class:"item-prefix",style:{width:"140px"}},"接触刚度(slsfac)",-1)),e("div",gs,[V(e("input",{type:"text","onUpdate:modelValue":i[6]||(i[6]=o=>s.slsfac=o),onInput:i[7]||(i[7]=o=>C("slsfac",o))},null,544),[[L,s.slsfac]])]),i[20]||(i[20]=e("div",{class:"item-suffix"},null,-1))]),e("div",ws,[i[21]||(i[21]=e("div",{class:"item-prefix",style:{width:"140px"}},"计算时长(endtim)",-1)),e("div",ys,[V(e("input",{type:"text","onUpdate:modelValue":i[8]||(i[8]=o=>s.endtim=o),onInput:i[9]||(i[9]=o=>C("endtim",o))},null,544),[[L,s.endtim]])]),i[22]||(i[22]=e("div",{class:"item-suffix"},null,-1))]),e("div",Is,[i[23]||(i[23]=e("div",{class:"item-prefix",style:{width:"140px"}},"输出间隔(D3THDT)",-1)),e("div",xs,[V(e("input",{type:"text","onUpdate:modelValue":i[10]||(i[10]=o=>s.dt=o),onInput:i[11]||(i[11]=o=>C("dt",o))},null,544),[[L,s.dt]])]),i[24]||(i[24]=e("div",{class:"item-suffix"},null,-1))])]),e("div",{class:"btn-box",onClick:i[12]||(i[12]=o=>h())})]))}}),hs=q(bs,[["__scopeId","data-v-f66539fa"]]),$s={},js={class:"sim-panel"};function Cs(S,r){return $(),D("div",js,r[0]||(r[0]=[e("div",{class:"sim-layout"},[e("div",{class:"sim-top"}),e("div",{class:"sim-body"}),e("div",{class:"sim-f"})],-1)]))}const Ms=q($s,[["render",Cs],["__scopeId","data-v-df699641"]]),_s={class:"container"},ks=Z({__name:"ResultDisplay",props:{projectId:{}},setup(S){const r=S;oe(()=>r.projectId,async p=>{p!==void 0&&p>=0&&await j(p)});const C=y(null),s=y(null),g=y(null),a=y(null),h=y(null),j=async p=>{try{const m=await ce(p);m.url&&(C.value=m,s.value=m.imageOnePath,g.value=m.imageTwoPath,a.value=m.imageThreePath,h.value=m.imageFourPath)}catch{}};return(p,m)=>($(),D("div",_s,[e("div",{class:"item-box",style:ge({"background-image":s.value||"url(/计算结果数据面板1.png)"})},m[0]||(m[0]=[e("div",{style:{width:"710px",height:"356px","margin-top":"76px","margin-left":"50px","background-image":"url( /防护结构变形图.png)"}},null,-1)]),4),e("div",{class:"item-box",style:ge({"background-image":g.value||"url(/计算结果数据面板2.png)"})},m[1]||(m[1]=[e("div",{style:{width:"780px",height:"390px","margin-top":"63px","margin-left":"13px","background-image":"url( /弹体速度变化曲线.png)"}},null,-1)]),4),e("div",{class:"item-box",style:ge({"background-image":a.value||"url(/计算结果数据面板3.png)"})},m[2]||(m[2]=[e("div",{style:{width:"795px",height:"320px","margin-top":"90px","margin-left":"8px","background-image":"url( /防护结构各part内能变化曲线.png)"}},null,-1)]),4),e("div",{class:"item-box",style:ge({"background-image":h.value||"url(/计算结果数据面板4.png)"})},m[3]||(m[3]=[e("div",{style:{width:"800px",height:"325px","margin-top":"63px","margin-left":"13px","background-image":"url( /防护结构整体内能变化曲线.png)"}},null,-1)]),4)]))}}),Vs=q(ks,[["__scopeId","data-v-2cdf3214"]]),Ts={key:0,class:"main-container"},Ds={class:"left-container"},Ps={class:"right-container"},Ss={key:1,class:"main-container"},Ls=Z({__name:"Main",props:{val:{type:Number,required:!0},projectId:{type:Number,default:0}},setup(S){const r=S;return(C,s)=>r.val!=7?($(),D("div",Ts,[e("div",Ds,[r.val==1?($(),G(cl,{key:0,projectId:r.projectId,show:r.val==1},null,8,["projectId","show"])):r.val==2?($(),G(fl,{key:1,projectId:r.projectId,show:r.val==2},null,8,["projectId","show"])):r.val==3?($(),G(ao,{key:2,projectId:r.projectId,show:r.val==3},null,8,["projectId","show"])):r.val==4?($(),G(Fo,{key:3,projectId:r.projectId,show:r.val==4},null,8,["projectId","show"])):r.val==5?($(),G(is,{key:4,projectId:r.projectId,show:r.val==5},null,8,["projectId","show"])):r.val==6?($(),G(hs,{key:5,projectId:r.projectId,show:r.val==6},null,8,["projectId","show"])):ue("",!0)]),e("div",Ps,[_(Ms)])])):($(),D("div",Ss,[_(Vs,{projectId:r.projectId},null,8,["projectId"])]))}}),Us=q(Ls,[["__scopeId","data-v-d1aa2e19"]]),Ns={class:"page"},Fs={class:"page-header"},Os={class:"page-body"},Es={class:"left-body"},Bs={class:"main-body"},As=Z({__name:"index",setup(S){le(async()=>{}),Je(()=>{});const r=y(1),C=j=>{console.log("updateSelectValue",j),r.value=j},s=y(0),g=j=>{console.log("updateSelectProjectId",j),s.value=j},a=y(!1),h=j=>{console.log("updateIsCalculating",j),a.value=j};return(j,p)=>($(),D("div",Ns,[e("div",Fs,[_(Lt,{onUpdateSelectProjectId:g,onUpdateIsCalculating:h})]),e("div",Os,[e("div",Es,[_(Jt,{val:r.value,onUpdateSelectValue:C,isCalculating:a.value,projectId:s.value},null,8,["val","isCalculating","projectId"])]),e("div",Bs,[_(Us,{val:r.value,"onUpdate:val":p[0]||(p[0]=m=>r.value=m),projectId:s.value},null,8,["val","projectId"])])])]))}}),Js=q(As,[["__scopeId","data-v-561c9be5"]]);export{Js as default};

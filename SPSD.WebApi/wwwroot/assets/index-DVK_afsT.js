import{d as R,o as ee,i as te,j as ne,c as M,k as le,a as e,l as h,v as k,f as I,m as oe,_ as A,r as w,E as P,F as J,b as $,e as z,n as E,w as S,u as Ne,p as Q,q,g as ze,t as N,h as se,s as Ce,x as De,y as Oe}from"./index-8a7OXaKS.js";import{A as Fe,g as Ee,a as Te,b as ye,c as Le,e as Ae,f as Be,h as We,i as Ke,_ as Je,l as Re,j as He,k as qe,m as Ge,n as Qe,d as Xe,o as Ye,p as Ze}from"./DeepClone-Cn9qbvrI.js";import{r as Pe,b as Se,h as ce,a as fe,g as et,w as tt}from"./common-D68UFIaE.js";const st={key:0,class:"dialog-container"},lt={class:"dialog-from"},ot={class:"from-mian"},it={style:{width:"100%",height:"820px",display:"flex"}},at={class:"mian-body"},nt={class:"row-item"},rt={class:"item-text"},dt={class:"row-item"},ut={class:"item-text"},ct={class:"row-item"},pt={class:"item-text"},vt={class:"row-item"},mt={class:"item-text"},gt={class:"row-item"},yt={class:"item-text",style:{width:"580px"}},ft={style:{width:"85px",height:"80px",display:"flex","align-items":"center"}},wt={class:"from-bottom"},Ve=2,xt=R({__name:"AddProjedt",props:{visible:{type:Boolean}},setup(V,{emit:a}){const g=V,d=a;ee(()=>{m()}),te(()=>g.visible,s=>{s&&m()});const v=ne({projectName:"",category:Ve,simulationTypeOne:"",simulationTypeTwo:"",projectCode:"",createTime:new Date().toISOString().slice(0,19).replace("T"," "),createUser:"",workDirectory:""}),m=()=>{v.projectName="",v.projectCode="",v.simulationTypeOne="",v.simulationTypeTwo="",v.createTime="",v.createUser="",v.workDirectory=""},b=()=>{console.log("取消"),m(),d("closeDialog",!1)},p=async()=>{console.log("确认"),v.category=Ve,await Fe(v),d("closeDialog",!0)},i=()=>{console.log("选择工作目录");let u=JSON.stringify({cmd:"OpenFolderDialog"});window.chrome&&window.chrome.webview&&window.chrome.webview.postMessage(u)};typeof window<"u"&&window.chrome&&window.chrome.webview&&typeof window.chrome.webview.addEventListener=="function"&&window.chrome.webview.addEventListener("message",s=>{let u=JSON.parse(s.data);u.cmdCategory==="OpenFolderDialog"&&(v.workDirectory=u.data.folderPath)});const l=s=>{console.log("选择工作目录event:",s);const u=s.target;if(u&&u.files&&u.files.length>0){const _=u.files[0].webkitRelativePath.split("/")[0];v.workDirectory=_}};return(s,u)=>s.visible?(I(),M("div",st,[e("div",lt,[e("div",ot,[u[17]||(u[17]=e("div",{class:"mian-header"},"新建仿真项目",-1)),e("div",it,[e("div",at,[e("div",nt,[u[10]||(u[10]=e("div",{class:"item-title"},"项目名称",-1)),e("div",rt,[h(e("input",{type:"text","onUpdate:modelValue":u[0]||(u[0]=_=>v.projectName=_)},null,512),[[k,v.projectName]])])]),e("div",dt,[u[11]||(u[11]=e("div",{class:"item-title"},"仿真类型",-1)),e("div",ut,[h(e("input",{type:"text","onUpdate:modelValue":u[1]||(u[1]=_=>v.simulationTypeOne=_)},null,512),[[k,v.simulationTypeOne]])])]),e("div",ct,[u[12]||(u[12]=e("div",{class:"item-title"},"项目编号",-1)),e("div",pt,[h(e("input",{type:"text","onUpdate:modelValue":u[2]||(u[2]=_=>v.projectCode=_)},null,512),[[k,v.projectCode]])])]),e("div",vt,[u[13]||(u[13]=e("div",{class:"item-title"},"创建人",-1)),e("div",mt,[h(e("input",{type:"text","onUpdate:modelValue":u[3]||(u[3]=_=>v.createUser=_)},null,512),[[k,v.createUser]])])]),e("div",gt,[u[15]||(u[15]=e("div",{class:"item-title"},"工作目录",-1)),e("div",yt,[h(e("input",{type:"text","onUpdate:modelValue":u[4]||(u[4]=_=>v.workDirectory=_)},null,512),[[k,v.workDirectory]])]),e("div",{style:{height:"32px"},onClick:u[6]||(u[6]=_=>i())},[u[14]||(u[14]=e("img",{src:" /but_back.png",alt:"",style:{height:"32px",width:"auto"}},null,-1)),h(e("input",{id:"folderInput",type:"file",webkitdirectory:"",onChange:u[5]||(u[5]=_=>l(_))},null,544),[[oe,!1]])])]),u[16]||(u[16]=e("div",{class:"row-item",style:{height:"280px"}},[e("img",{src:" /image_11.png",alt:"",style:{height:"auto",width:"100%"}})],-1))]),e("div",ft,[e("div",{style:{height:"58px",width:"58px","margin-left":"10px"},onClick:u[7]||(u[7]=_=>b())})])])]),e("div",wt,[e("div",{class:"btn-cancel",onClick:u[8]||(u[8]=_=>b())}),e("div",{class:"btn-confirm",onClick:u[9]||(u[9]=_=>p())})])])])):le("",!0)}}),It=A(xt,[["__scopeId","data-v-d6d5ecb2"]]),Ue=V=>Pe({url:Se("KangBao/"+V),method:"get",responseType:"json"}),bt=V=>Pe({url:Se("KangBao"),method:"post",data:V,headers:{"content-type":"application/json"},responseType:"json"}),_t={class:"header"},ht={class:"left-header"},$t={style:{height:"38px",width:"221px",gap:"16px",display:"flex"}},jt={style:{height:"38px",width:"236px",padding:"0px","background-image":"url( /select.png)"}},kt={class:"right-header"},Mt={style:{width:"100%",height:"56px",padding:"0px",display:"flex",gap:"10px"}},Ct=2,Vt=R({__name:"Header",setup(V,{emit:a}){const g=a;ee(async()=>{console.log("the component is now mounted."),await u()}),ze();const d=Ne(),v=async()=>{await ce(),d.push({path:"/home",replace:!0})},m=w(!1),b=async()=>{await ce(),m.value=!0,console.log("新建项目")},p=async c=>{console.log("关闭新建项目"),c&&await u(),m.value=!1,await fe()},i=w(""),l=w([]),s=c=>{console.log("选中项目ID:",c),i.value=c,g("updateSelectProjectId",c)},u=async()=>{try{const c=await Ee(Ct);console.log("获取项目列表成功",c),c?(l.value=c.map(r=>({label:r.projectName,value:r.id})),l.value.length>0&&s(l.value[0].value)):console.error("项目列表为空")}catch(c){console.error("获取项目列表失败",c)}},_=w(!1);w(0);const D=async()=>{if(_.value)return;O(!0),await C()===-1&&O(!1)},O=c=>{_.value=c,g("updateIsCalculating",c)},C=async()=>{let c=i.value;try{const r=await Te(c);if(r){if(!t(r))return P.error("请填写仿真参数建模必填项."),-1;const o=await x(c),F=await j(c),B=await L(c);let ie={projectId:c,tssfac:r.tssfac,slsfac:r.slsfac,endtim:r.endtim,d3plots:r.d3plots,dt:r.dt,folderPath:o,charge_r:F.charge_r,charge_l:F.charge_l,structWallThickness:F.structWallThickness,boxThickness:F.boxThickness,dynamiteMaterialItemId:F.dynamiteMaterialItemId,airMaterialItemId:F.airMaterialItemId,boxMaterialItemId:F.boxMaterialItemId,structMaterialItemId:F.structMaterialItemId,materialItems:B};if(!ie.folderPath||ie.folderPath=="")return P.error("请选择生成k文件的文件夹."),-1;let ae={cmd:"HandleComputeResultByKangBao",jsonData:JSON.stringify(ie)},pe=JSON.stringify(ae);if(window.chrome&&window.chrome.webview)return window.chrome.webview.postMessage(pe),1}else return P.error("请填写仿真参数建模"),-1}catch(r){return console.error("获取项目详情失败",r),-1}};typeof window<"u"&&window.chrome&&window.chrome.webview&&typeof window.chrome.webview.addEventListener=="function"&&window.chrome.webview.addEventListener("message",c=>{let r=JSON.parse(c.data);r.cmdCategory==="HandleComputeResultByKangBao"&&(r.success?P.success(r.message):P.error(r.message),O(!1))});const x=async c=>{let r="";try{const o=await ye(c);o&&(r=o.workDirectory)}catch(o){console.error("获取项目详情失败",o)}return r},L=async c=>{if(c!==void 0&&c>=0)try{const r=await Le(c,1,50);if(r&&r.list)return r.list}catch(r){console.error("getMaterialItems:",r)}return[]},j=async c=>{let r={projectId:c,charge_r:0,charge_l:0,l1_x:0,l1_y:0,l1_z:0,l2_y:0,structWallThickness:0,boxThickness:0,dynamiteMaterialItemId:0,airMaterialItemId:0,boxMaterialItemId:0,structMaterialItemId:0};try{const o=await Ue(c);o&&(r.charge_r=o.charge_r,r.charge_l=o.charge_l,r.l1_x=o.l1_x,r.l1_y=o.l1_y,r.l1_z=o.l1_z,r.l2_y=o.l2_y,r.structWallThickness=o.structWallThickness,r.boxThickness=o.boxThickness,r.dynamiteMaterialItemId=o.dynamiteMaterialItemId,r.airMaterialItemId=o.airMaterialItemId,r.boxMaterialItemId=o.boxMaterialItemId,r.structMaterialItemId=o.structMaterialItemId)}catch(o){console.error("获取项目详情失败",o)}return r},t=c=>{const r=["tssfac","slsacf","endtim","d3plots","dt"];for(const o of r)if(c[o]===null||c[o]==="")return!1;return!0};return(c,r)=>{const o=z("el-option"),F=z("el-select");return I(),M(J,null,[e("div",_t,[e("div",ht,[e("div",$t,[e("div",{style:{width:"85px",height:"38px","background-image":"url( /返回.png)"},onClick:r[0]||(r[0]=B=>v())}),e("div",{style:{width:"107px",height:"38px","background-image":"url( /create.png)"},onClick:r[1]||(r[1]=B=>b())})]),e("div",jt,[$(F,{modelValue:i.value,"onUpdate:modelValue":r[2]||(r[2]=B=>i.value=B),clearable:"",placeholder:"请选择",style:{width:"236px",height:"38px",color:"white"},class:E("custom-select"),onChange:s},{default:S(()=>[(I(!0),M(J,null,Q(l.value,B=>(I(),q(o,{key:B.value,label:B.label,value:B.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])])]),r[6]||(r[6]=e("div",{class:"center-header"},null,-1)),e("div",kt,[r[5]||(r[5]=e("div",{style:{width:"100%",height:"44px",display:"flex","justify-content":"flex-end"}},[e("div",{style:{width:"100px",height:"32px","background-image":"url( /user.png)"}})],-1)),e("div",Mt,[r[4]||(r[4]=e("div",{style:{width:"145px",height:"56px","background-image":"url( /main_导出报告.png)",visibility:"hidden"}},null,-1)),e("div",{style:{width:"145px",height:"56px","background-image":"url( /计算.png)"},class:E(_.value?"isDisable":""),onClick:r[3]||(r[3]=B=>D())},null,2)])])]),$(It,{visible:m.value,onCloseDialog:p},null,8,["visible"])],64)}}}),Dt=A(Vt,[["__scopeId","data-v-6230e18f"]]),Tt={class:"sidebar"},Lt={style:{height:"892px",width:"200px",display:"flex","flex-direction":"column",gap:"10px"}},Pt={style:{width:"100%",height:"826px",display:"flex","flex-direction":"column",gap:"10px"}},St={class:"row-ranking"},Ut={class:"row-ranking row-item-sub"},Nt={class:"row-ranking row-item-sub"},zt={class:"row-ranking"},Ot={class:"row-ranking"},Ft=R({__name:"Sidebar",props:{val:Number},setup(V,{emit:a}){const g=V,d=a,v=w(g.val),m=async b=>{b!==v.value&&(b===7?await ce():await fe(),v.value=b,console.log(b),d("updateSelectValue",v.value))};return(b,p)=>(I(),M("div",Tt,[e("div",Lt,[e("div",Pt,[e("div",St,[p[5]||(p[5]=e("div",{class:"box-rectangle"},"1",-1)),e("div",{class:E(["row-content",v.value==1?"active-Class":""]),onClick:p[0]||(p[0]=i=>m(1))},"项目信息",2)]),p[10]||(p[10]=e("div",{class:"row-ranking"},[e("div",{class:"box-rectangle"},"2"),e("div",{class:"row-content"},"仿真模型")],-1)),e("div",Ut,[p[6]||(p[6]=e("div",{class:"box-rectangle"},"A",-1)),e("div",{class:E(["row-content-subset",v.value==3?"active-Class":""]),onClick:p[1]||(p[1]=i=>m(3))},"材料设置",2)]),e("div",Nt,[p[7]||(p[7]=e("div",{class:"box-rectangle"},"B",-1)),e("div",{class:E(["row-content-subset",v.value==4?"active-Class":""]),onClick:p[2]||(p[2]=i=>m(4))},"抗爆结构模型",2)]),e("div",zt,[p[8]||(p[8]=e("div",{class:"box-rectangle"},"3",-1)),e("div",{class:E(["row-content",v.value==6?"active-Class":""]),onClick:p[3]||(p[3]=i=>m(6))},"仿真参数设置",2)]),e("div",Ot,[p[9]||(p[9]=e("div",{class:"box-rectangle"},"4",-1)),e("div",{class:E(["row-content",v.value==7?"active-Class":""]),onClick:p[4]||(p[4]=i=>m(7))},"计算结果",2)])]),p[11]||(p[11]=e("div",{class:"btnExportReport",style:{display:"none"}},null,-1))])]))}}),Et=A(Ft,[["__scopeId","data-v-abc3f5a5"]]),At={class:"project-info"},Bt={class:"project-item"},Wt={class:"item-content bgColor-1"},Kt={class:"project-item"},Jt={class:"item-content bgColor-2"},Rt={class:"project-item"},Ht={class:"item-content bgColor-1"},qt={class:"project-item"},Gt={class:"item-content bgColor-2"},Qt={class:"project-item"},Xt={class:"item-content bgColor-1"},Yt={class:"project-item"},Zt={class:"item-content bgColor-2"},es={class:"project-item"},ts={class:"item-content bgColor-1"},ss={class:"project-item"},ls={style:{width:"258px",height:"50px",display:"flex",gap:"10px"}},os={class:"item-content bgColor-2",style:{width:"155px"}},is=R({__name:"ProjectInfo",props:{projectId:{}},setup(V){const a=V;ee(async()=>{console.log("the component is now mounted."),await g()}),te(()=>a.projectId,async p=>{await g()});const g=async()=>{a.projectId!==void 0&&a.projectId>=0&&await v(),await et(b)},d=w({id:a.projectId,projectCode:"",createTime:"",modifyDate:"",projectName:"",createUser:"",updateTime:"",simulationTypeOne:"",simulationTypeTwo:"",workDirectory:""}),v=async()=>{var p;if(a.projectId<0){console.error("项目ID无效",a.projectId);return}try{const i=await ye(a.projectId);console.log("项目详情",a.projectId,i),i&&(i.createTime=((p=i.createTime)==null?void 0:p.replace("T"," ").slice(0,19))||"",d.value=i)}catch(i){console.error("获取项目详情失败",i)}},m=async()=>{if(a.projectId<0){P.error("项目无效，无法打开工作目录");return}let p="OpenFolderDialogByEdit",i={cmd:"OpenFolderDialogByEdit",folderPath:d.value.workDirectory,projectId:a.projectId};tt(p,i)},b=async p=>{let i=JSON.parse(p);if(i.cmdCategory==="OpenFolderDialogByEdit"){d.value.workDirectory=i.data.folderPath;try{let l={id:a.projectId,workDirectory:d.value.workDirectory};await Ae(l),P.success("修改工作目录成功")}catch{P.error("修改工作目录失败，请稍后重试")}}};return(p,i)=>{const l=z("el-text");return I(),M("div",At,[e("div",Bt,[i[1]||(i[1]=e("div",{class:"item-title-box"},[e("div",{class:"item-title"},"项目编码")],-1)),e("div",Wt,N(d.value.projectCode),1)]),e("div",Kt,[i[2]||(i[2]=e("div",{class:"item-title-box",style:{"border-left":"3px solid #FFC700","background-color":"rgba(255,199,0,0.4)"}},[e("div",{class:"item-title"},"创建时间")],-1)),e("div",Jt,N(d.value.createTime),1)]),e("div",Rt,[i[3]||(i[3]=e("div",{class:"item-title-box",style:{"border-left":"3px solid #34FFE7","background-color":"rgba(43,211,194,0.4)"}},[e("div",{class:"item-title"},"修改日期")],-1)),e("div",Ht,N(d.value.updateTime),1)]),e("div",qt,[i[4]||(i[4]=e("div",{class:"item-title-box",style:{"border-left":"3px solid #00A0E9","background-color":"rgba(0,83,159,0.4)"}},[e("div",{class:"item-title"},"项目名称")],-1)),e("div",Gt,N(d.value.projectName),1)]),e("div",Qt,[i[5]||(i[5]=e("div",{class:"item-title-box",style:{"border-left":"3px solid #00A0E9","background-color":"rgba(0,83,159,0.4)"}},[e("div",{class:"item-title"},"创建人")],-1)),e("div",Xt,N(d.value.createUser),1)]),e("div",Yt,[i[6]||(i[6]=e("div",{class:"item-title-box",style:{"border-left":"3px solid #FFC700","background-color":"rgba(255,199,0,0.4)"}},[e("div",{class:"item-title"},"仿真类型")],-1)),e("div",Zt,N(d.value.simulationTypeOne),1)]),e("div",es,[i[7]||(i[7]=e("div",{class:"item-title-box",style:{"border-left":"3px solid #34FFE7","background-color":"rgba(43,211,194,0.4)"}},[e("div",{class:"item-title"},"仿真类型")],-1)),e("div",ts,N(d.value.simulationTypeTwo),1)]),e("div",ss,[i[9]||(i[9]=e("div",{class:"item-title-box",style:{"border-left":"3px solid #00A0E9","background-color":"rgba(0,83,159,0.4)"}},[e("div",{class:"item-title"},"工作目录")],-1)),e("div",ls,[e("div",os,[$(l,{class:"w-130px mb-2",truncated:"",size:"large",style:{color:"#ffffff"}},{default:S(()=>[se(N(d.value.workDirectory),1)]),_:1})]),e("div",{style:{width:"64px",height:"48px","background-image":"url(/open.png)"},onClick:i[0]||(i[0]=s=>m())}),i[8]||(i[8]=e("div",null,null,-1))])])])}}}),as=A(is,[["__scopeId","data-v-973eb81c"]]),ns={},rs={class:"container"};function ds(V,a){return I(),M("div",rs," 仿真模型 ")}const us=A(ns,[["render",ds],["__scopeId","data-v-9c3bdf4b"]]),cs={key:0,class:"dialog-container"},ps={class:"dialog-from"},vs={class:"from-mian"},ms={style:{width:"100%",height:"820px",display:"flex"}},gs={class:"mian-body"},ys={class:"table-items"},fs={class:"table-pagination"},ws={style:{width:"85px",height:"80px",display:"flex","align-items":"center"}},xs={class:"from-bottom"},me=10,Is=R({__name:"MaterialSelection",props:{visible:{type:Boolean},projectId:{}},setup(V,{emit:a}){const g=V;w(!1),w(!0);const d=w([]),v=w([]),m=C=>{d.value=C.map(x=>x.id),v.value=C},b=w(1),p=w(1),i=a;ee(()=>{s(g.projectId)}),te(()=>g.projectId,async C=>{s(C)});const l=w([]),s=async C=>{if(C!==void 0&&C>=0)try{const x=await Be(b.value,me);p.value=x.pageCount,l.value=x.list,console.log("获取材料列表成功:",x)}catch(x){console.error("获取材料列表失败:",x)}},u=async C=>{console.log(`current page: ${C}`),await s(g.projectId)},_=()=>{console.log("取消"),i("closeDialog",!1)},D=async()=>{console.log("确认"),await O(),i("closeDialog",!0)},O=async()=>{if(d.value.length===0){console.error("请至少选择一个材料");return}const C=[];d.value.forEach(x=>{const L=l.value.find(j=>j.id===x);L&&C.push({projectId:g.projectId,materialId:L.id,materialName:L.materialName,strengthModelName:L.strengthModelName,strengthModelParameter:L.strengthModelParameter,strengthModelValue:L.strengthModelValue,eosName:L.eosName,eosParameter:L.eosParameter,eosValue:L.eosValue,referenceCount:L.referenceCount})}),console.log("准备添加的材料数据:",C);try{const x=await We(C);console.log("添加材料成功:",x),i("closeDialog")}catch(x){console.error("添加材料失败:",x)}};return(C,x)=>{const L=z("el-table-column"),j=z("el-table"),t=z("el-pagination");return C.visible?(I(),M("div",cs,[e("div",ps,[e("div",vs,[x[5]||(x[5]=e("div",{class:"mian-header"},"材料选择",-1)),e("div",ms,[e("div",gs,[e("div",ys,[$(j,{data:l.value,style:{width:"100%"},onSelectionChange:m},{default:S(()=>[$(L,{type:"selection",width:"55"}),$(L,{property:"id",label:"材料编号",width:"120"}),$(L,{label:"材料名称",width:"600"},{default:S(c=>[se(N(c.row.materialName),1)]),_:1}),$(L,{property:"strengthModelName",label:"本构方程",width:"295"}),$(L,{property:"eosName",label:"状态方程",width:"295"})]),_:1},8,["data"])]),e("div",fs,[$(t,{background:"",layout:"prev, pager, next",total:p.value,"page-size":me,"onUpdate:pageSize":x[0]||(x[0]=c=>me=c),"current-page":b.value,"onUpdate:currentPage":x[1]||(x[1]=c=>b.value=c),onCurrentChange:u},null,8,["total","current-page"])])]),e("div",ws,[e("div",{style:{height:"58px",width:"58px","margin-left":"10px"},onClick:x[2]||(x[2]=c=>_())})])])]),e("div",xs,[e("div",{class:"btn-cancel",onClick:x[3]||(x[3]=c=>_())}),e("div",{class:"btn-confirm",onClick:x[4]||(x[4]=c=>D())})])])])):le("",!0)}}}),bs=A(Is,[["__scopeId","data-v-d352ed72"]]),_s={class:"container"},hs={class:"top-container"},$s={style:{width:"100%",height:"32px",display:"flex","justify-content":"flex-end"}},js={class:"material-list-box"},ks={class:"material-list"},Ms=["onClick"],Cs={class:"item-left"},Vs={class:"item-right"},Ds=["onClick"],Ts={style:{display:"flex","align-items":"center"}},Ls=["onClick"],Ps={class:"material-pagination"},Ss={class:"bottom-container"},Us={class:"bottom-container-box"},Ns={class:"material-property-header",style:{"background-color":"#00539F"}},zs={class:"material-property-header"},Os={class:"property-value"},Fs={class:"property-value"},Es={class:"property-name"},As={class:"property-value border-left"},Bs=["onUpdate:modelValue","onInput"],Ws={class:"property-value"},Ks={class:"property-name"},Js={class:"property-value border-left"},Rs=["onUpdate:modelValue","onInput"],Hs={class:"property-value"},qs={class:"property-name"},Gs={class:"property-value border-left"},Qs=["onUpdate:modelValue","onInput"],Xs={class:"dialog-footer"},Ys={class:"dialog-footer"},ge=10,Zs=R({__name:"MaterialSettings",props:{projectId:{}},setup(V){const a=w(1),g=w(1),d=V;ee(()=>{b(d.projectId)}),te(()=>d.projectId,async y=>{b(y)});const v=w([]),m=w(null),b=async y=>{if(y!==void 0&&y>=0)try{const n=await Le(y,a.value,ge);g.value=n.pageCount,v.value=n.list,n.list&&n.list.length>0&&(D.value=n.list[0].id,c(n.list[0])),console.log("getMaterialItems:",n)}catch(n){console.error("getMaterialItems:",n)}},p=async y=>{console.log(`current page: ${y}`),await b(d.projectId)},i=w(!1),l=async()=>{await ce(),i.value=!0,console.log("新建项目")},s=async y=>{y&&await b(d.projectId),i.value=!1,await fe()},u=w(!1),_=w(!1),D=w(null),O=y=>{console.log("删除材料项",y),u.value=!0,D.value=y},C=async()=>{await He(D.value),await b(d.projectId),u.value=!1},x=ne({id:0,projectId:0,materialName:""}),L=y=>{_.value=!0,D.value=y;const n=v.value.find(W=>W.id===y);console.log("编辑材料项",n),n&&(x.id=n.id,x.projectId=n.projectId,x.materialName=n.materialName)},j=async()=>{await qe(x),await b(d.projectId),_.value=!1},t=y=>{console.log("选中材料项ID:",y),D.value=y;const n=v.value.find(W=>W.id===y);c(n)},c=y=>{let n=[],W=[],G=[],T=y.strengthModelParameter.split(","),H=y.strengthModelValue.split(",");for(let U=0;U<T.length;U++){let X=T[U]||"",Y=H[U]||"";n.push({parameter:X,value:Y})}let re=y.eosParameter.split(","),ve=y.eosValue.split(",");for(let U=0;U<re.length;U++){let X=re[U]||"",Y=ve[U]||"";W.push({parameter:X,value:Y})}let de=y.failureModelParameter.split(","),ue=y.failureModelValue.split(",");for(let U=0;U<de.length;U++){let X=de[U]||"",Y=ue[U]||"";G.push({parameter:X,value:Y})}y.strengthList=n,y.eosList=W,y.failureList=G,m.value=y},r=w(!1),o=w(!1),F=w(!1),B=()=>{if(d.projectId===null||d.projectId<=0){P.error("没有选择项目，请创建项目再保存.");return}let y=r.value;r.value=!y},ie=()=>{let y=o.value;o.value=!y},we=()=>{let y=F.value;F.value=!y},ae=(y,n,W,G)=>{let T=m.value;T&&(y==="strength"&&T.strengthList?(T.strengthList[n][W]=G,T.strengthModelValue=T.strengthList.map(H=>H.value).join(",")):y==="eos"&&T.eosList?(T.eosList[n][W]=G,T.eosValue=T.eosList.map(H=>H.value).join(",")):y==="failure"&&T.failureList&&(T.failureList[n][W]=G,T.failureModelValue=T.failureList.map(H=>H.value).join(",")),console.log("Updated model after value change:",T),m.value=T)},pe=async()=>{if(m.value)try{let y=m.value;await Ke(y.id,y),P.success("材料项修改成功")}catch(y){console.error("Error saving material item changes:",y),P.error("保存材料项修改时出错")}};return(y,n)=>{var ue,U,X,Y,xe,Ie,be,_e,he,$e,je,ke,Me;const W=z("el-pagination"),G=z("el-divider"),T=z("el-button"),H=z("el-dialog"),re=z("el-input"),ve=z("el-form-item"),de=z("el-form");return I(),M(J,null,[e("div",_s,[e("div",hs,[e("div",$s,[e("div",{style:{width:"70px",height:"32px"},onClick:n[0]||(n[0]=f=>l())})]),e("div",js,[e("div",ks,[n[15]||(n[15]=e("div",{class:"material-item",style:{"background-color":"#043272"}},[e("div",{class:"item-left"},"材料名称"),e("div",{class:"item-right"},"操作")],-1)),(I(!0),M(J,null,Q(v.value,f=>(I(),M("div",{class:E(["material-item",f.id==D.value?"activeClass":""]),key:f.id,onClick:K=>t(f.id)},[e("div",Cs,N(f.materialName),1),e("div",Vs,[e("div",{style:{display:"flex","align-items":"center"},onClick:Ce(K=>L(f.id),["stop"])},n[14]||(n[14]=[e("img",{src:Je,alt:"local-icon",style:{width:"24px",height:"24px"}},null,-1)]),8,Ds),e("div",Ts,[e("img",{src:Re,alt:"local-icon",style:{width:"24px",height:"24px"},onClick:Ce(K=>O(f.id),["stop"])},null,8,Ls)])])],10,Ms))),128))]),e("div",Ps,[$(W,{background:"",layout:"prev, pager, next",total:g.value,"current-page":a.value,"onUpdate:currentPage":n[1]||(n[1]=f=>a.value=f),"page-size":ge,"onUpdate:pageSize":n[2]||(n[2]=f=>ge=f),onCurrentChange:p},null,8,["total","current-page"])])])]),e("div",Ss,[e("div",Us,[e("div",Ns,[n[16]||(n[16]=e("div",{class:"property-name",style:{width:"100%"}},[e("span",{style:{color:"red","font-size":"16px"}},"参数单位: cm-g-us")],-1)),e("div",{class:"property-name",style:{"text-align":"right","font-weight":"bold"},onClick:n[3]||(n[3]=f=>pe())},"保存")]),e("div",zs,[n[17]||(n[17]=e("div",{class:"property-name"},"材料名称",-1)),e("div",Os,N((ue=m.value)==null?void 0:ue.materialName),1)]),e("div",{class:"material-property-title",onClick:n[4]||(n[4]=f=>B())},[n[18]||(n[18]=e("div",{class:"property-name"},"本构方程",-1)),e("div",Fs,N((U=m.value)==null?void 0:U.strengthModelName),1)]),((Y=(X=m.value)==null?void 0:X.strengthList)==null?void 0:Y.length)>0?(I(!0),M(J,{key:0},Q((xe=m.value)==null?void 0:xe.strengthList,(f,K)=>h((I(),M("div",{class:"material-property",key:K},[e("div",Es,N(f==null?void 0:f.parameter),1),e("div",As,[h(e("input",{class:"item-value","onUpdate:modelValue":Z=>f.value=Z,onInput:Z=>ae("strength",K,"value",f.value),placeholder:"Value"},null,40,Bs),[[k,f.value]])])])),[[oe,r.value]])),128)):le("",!0),$(G,{style:{margin:"0"}}),e("div",{class:"material-property-title",onClick:n[5]||(n[5]=f=>ie())},[n[19]||(n[19]=e("div",{class:"property-name"},"状态方程",-1)),e("div",Ws,N((Ie=m.value)==null?void 0:Ie.eosName),1)]),((_e=(be=m.value)==null?void 0:be.eosList)==null?void 0:_e.length)>0?(I(!0),M(J,{key:1},Q((he=m.value)==null?void 0:he.eosList,(f,K)=>h((I(),M("div",{class:"material-property",key:K},[e("div",Ks,N(f==null?void 0:f.parameter),1),e("div",Js,[h(e("input",{class:"item-value","onUpdate:modelValue":Z=>f.value=Z,onInput:Z=>ae("eos",K,"value",f.value),placeholder:"Value"},null,40,Rs),[[k,f.value]])])])),[[oe,o.value]])),128)):le("",!0),$(G,{style:{margin:"0"}}),e("div",{class:"material-property-title",onClick:n[6]||(n[6]=f=>we())},[n[20]||(n[20]=e("div",{class:"property-name"},"失效模型",-1)),e("div",Hs,N(($e=m.value)==null?void 0:$e.failureModelName),1)]),((ke=(je=m.value)==null?void 0:je.failureList)==null?void 0:ke.length)>0?(I(!0),M(J,{key:2},Q((Me=m.value)==null?void 0:Me.failureList,(f,K)=>h((I(),M("div",{class:"material-property",key:K},[e("div",qs,N(f==null?void 0:f.parameter),1),e("div",Gs,[h(e("input",{class:"item-value","onUpdate:modelValue":Z=>f.value=Z,onInput:Z=>ae("failure",K,"value",f.value),placeholder:"Value"},null,40,Qs),[[k,f.value]])])])),[[oe,F.value]])),128)):le("",!0)])])]),$(bs,{visible:i.value,projectId:d.projectId,onCloseDialog:s},null,8,["visible","projectId"]),$(H,{modelValue:u.value,"onUpdate:modelValue":n[9]||(n[9]=f=>u.value=f),title:"删除",width:"500",class:E("test-dialog")},{footer:S(()=>[e("div",Xs,[$(T,{onClick:n[7]||(n[7]=f=>u.value=!1)},{default:S(()=>n[21]||(n[21]=[se("取消")])),_:1}),$(T,{type:"primary",onClick:n[8]||(n[8]=f=>C())},{default:S(()=>n[22]||(n[22]=[se(" 确定 ")])),_:1})])]),default:S(()=>[n[23]||(n[23]=e("span",null,"确定删除该材料项吗？",-1))]),_:1},8,["modelValue"]),$(H,{modelValue:_.value,"onUpdate:modelValue":n[13]||(n[13]=f=>_.value=f),title:"修改",width:"500",class:E("test-dialog")},{footer:S(()=>[e("div",Ys,[$(T,{onClick:n[11]||(n[11]=f=>_.value=!1)},{default:S(()=>n[24]||(n[24]=[se("取消")])),_:1}),$(T,{type:"primary",onClick:n[12]||(n[12]=f=>j())},{default:S(()=>n[25]||(n[25]=[se(" 确定 ")])),_:1})])]),default:S(()=>[$(de,{model:x},{default:S(()=>[$(ve,{label:"材料名称","label-width":"140px"},{default:S(()=>[$(re,{modelValue:x.materialName,"onUpdate:modelValue":n[10]||(n[10]=f=>x.materialName=f),autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])],64)}}}),el=A(Zs,[["__scopeId","data-v-d99f903b"]]),tl={class:"container"},sl={class:"list-box"},ll={class:"row-list"},ol={class:"row-item"},il={class:"item-text",style:{width:"200px"}},al={class:"row-item"},nl={class:"item-text",style:{width:"200px"}},rl={class:"row-item"},dl={class:"item-text",style:{width:"200px"}},ul={class:"row-item"},cl={class:"item-text",style:{width:"200px"}},pl={class:"row-item"},vl={class:"item-text",style:{width:"200px"}},ml={class:"row-item"},gl={class:"item-text",style:{width:"200px"}},yl={class:"row-item"},fl={class:"item-text",style:{width:"200px"}},wl={class:"row-item"},xl={class:"item-text",style:{width:"200px"}},Il={class:"row-item"},bl={class:"item-text",style:{width:"200px"}},_l={class:"row-item"},hl={class:"item-text",style:{width:"200px"}},$l={class:"row-item"},jl={class:"item-text",style:{width:"200px"}},kl={class:"row-item"},Ml={class:"item-text",style:{width:"200px"}},Cl={class:"row-item"},Vl={class:"item-text",style:{padding:"0px 0px"}},Dl={class:"row-item"},Tl={class:"item-text",style:{padding:"0px 0px"}},Ll={class:"row-item"},Pl={class:"item-text",style:{padding:"0px 0px"}},Sl=R({__name:"StructureModel",props:{projectId:{},show:{type:Boolean}},setup(V){const a=V;ee(async()=>{console.log("the component is now mounted."),g()}),te(()=>a.projectId,async j=>{j!==void 0&&j>0&&g()});const g=async()=>{if(a.projectId<=0){console.error("项目ID无效",a.projectId);return}await u(a.projectId),await D(a.projectId),await i(a.projectId)},d=w(null),v=w(null),m=w(null),b=w(null),p=w([]),i=async j=>{try{const t=await Ge(j);let c=[];t&&t.length>0&&t.forEach(r=>{let o={label:r.materialName,value:r.id};c.push(o)}),p.value=c}catch(t){console.error("获取材料项失败",t)}},l=(j,t)=>{t&&t.target&&t.target.value!==void 0&&(j.indexOf("fwcellInfo.")===0||(s[j]=t.target.value.replace(/[^0-9.]/g,"").replace(/(\.\d*)\./g,"$1")))},s=ne({id:0,projectId:a.projectId,charge_r:null,charge_l:null,charge_z:null,subL1_y:null,subL1_z:null,l1_x:null,l1_y:null,l1_z:null,l2_y:null,edx:null,structWallThickness:null,boxThickness:null,dynamiteMaterialItemId:null,airMaterialItemId:null,boxMaterialItemId:null,structMaterialItemId:null}),u=async j=>{try{const t=await Ue(j);t&&(s.id=t.id,s.projectId=t.projectId,t.charge_r>0&&(s.charge_r=t.charge_r),t.charge_l>0&&(s.charge_l=t.charge_l),t.charge_z>0&&(s.charge_z=t.charge_z),s.subL1_y=t.subL1_y,s.subL1_z=t.subL1_z,s.l1_x=t.l1_x,s.l1_y=t.l1_y,s.l1_z=t.l1_z,s.l2_y=t.l2_y,s.edx=t.edx,t.structWallThickness>0&&(s.structWallThickness=t.structWallThickness),t.boxThickness>0&&(s.boxThickness=t.boxThickness),s.dynamiteMaterialItemId=t.dynamiteMaterialItemId,s.airMaterialItemId=t.airMaterialItemId,s.boxMaterialItemId=t.boxMaterialItemId,s.structMaterialItemId=t.structMaterialItemId,t.dynamiteMaterialItemId>0&&(d.value=t.dynamiteMaterialItemId),t.boxMaterialItemId>0&&(m.value=t.boxMaterialItemId),t.structMaterialItemId>0&&(b.value=t.structMaterialItemId),v.value=t.airMaterialItemId)}catch(t){console.error("获取项目详情失败",t)}},_=w(""),D=async j=>{try{const t=await ye(j);t&&(_.value=t.workDirectory)}catch(t){console.error("获取项目详情失败",t)}},O=w(!1);let C=null;const x=async()=>{if(!O.value){if(O.value=!0,C||(C=Oe.service({lock:!0,text:"生成模型中，请稍后...",background:"rgba(0, 0, 0, 0.7)"})),s.projectId===null||s.projectId<=0){P.error("没有选择项目，请创建项目再保存."),O.value=!1,C.close();return}s.dynamiteMaterialItemId=d.value,s.airMaterialItemId=v.value,s.boxMaterialItemId=m.value,s.structMaterialItemId=b.value;try{if(!L(s)){P.error("请输入所有输入框内容再保存."),O.value=!1,C.close();return}await bt(s);let j=Qe(s);if(j.folderPath=_.value,!j.folderPath||j.folderPath==""){P.error("请选择生成tg的文件夹."),O.value=!1,C.close();return}let c={cmd:"CreateKangBaoTgFile",jsonData:JSON.stringify(j)},r=JSON.stringify(c);window.chrome&&window.chrome.webview&&window.chrome.webview.postMessage(r)}catch(j){console.error("保存项目详情失败",j),P.error("保存失败，请稍后再试.")}finally{}O.value=!1}};typeof window<"u"&&window.chrome&&window.chrome.webview&&typeof window.chrome.webview.addEventListener=="function"&&window.chrome.webview.addEventListener("message",j=>{let t=JSON.parse(j.data);t.cmdCategory==="CreateKangBaoTgFile"&&(t.success?P.success(t.message):P.error(t.message),(t.success&&t.message==="模型加载成功"||t.success==!1)&&C&&C.close())});const L=j=>{const t=["projectId","charge_r","charge_l","charge_z","subL1_y","subL1_z","l1_x","l1_y","l1_z","l2_y","edx","structWallThickness","boxThickness","dynamiteMaterialItemId","boxMaterialItemId","structMaterialItemId"];for(const c of t)if(j[c]===null||j[c]==="")return!1;return!0};return(j,t)=>{const c=z("el-option"),r=z("el-select");return I(),M("div",tl,[e("div",sl,[e("div",ll,[t[55]||(t[55]=De('<div class="row-item" data-v-ba23d8dd><div class="rectangle" data-v-ba23d8dd></div><div style="color:#97CDFF;" data-v-ba23d8dd>抗暴模型</div></div><div class="row-item-image" data-v-ba23d8dd></div><div class="row-item" data-v-ba23d8dd><div class="rectangle" data-v-ba23d8dd></div><div style="color:#97CDFF;" data-v-ba23d8dd></div></div>',3)),e("div",ol,[t[28]||(t[28]=e("div",{class:"item-prefix"},"charge_r",-1)),e("div",il,[h(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=o=>s.charge_r=o),onInput:t[1]||(t[1]=o=>l("charge_r",o))},null,544),[[k,s.charge_r]])]),t[29]||(t[29]=e("div",{class:"item-suffix"},"cm",-1))]),e("div",al,[t[30]||(t[30]=e("div",{class:"item-prefix"},"charge_l",-1)),e("div",nl,[h(e("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=o=>s.charge_l=o),onInput:t[3]||(t[3]=o=>l("charge_l",o))},null,544),[[k,s.charge_l]])]),t[31]||(t[31]=e("div",{class:"item-suffix"},"cm",-1))]),e("div",rl,[t[32]||(t[32]=e("div",{class:"item-prefix"},"charge_z",-1)),e("div",dl,[h(e("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=o=>s.charge_z=o),onInput:t[5]||(t[5]=o=>l("charge_z",o))},null,544),[[k,s.charge_z]])]),t[33]||(t[33]=e("div",{class:"item-suffix"},"cm",-1))]),e("div",ul,[t[34]||(t[34]=e("div",{class:"item-prefix"},"l1_y",-1)),e("div",cl,[h(e("input",{type:"text","onUpdate:modelValue":t[6]||(t[6]=o=>s.subL1_y=o),onInput:t[7]||(t[7]=o=>l("subL1_y",o))},null,544),[[k,s.subL1_y]])]),t[35]||(t[35]=e("div",{class:"item-suffix"},"cm",-1))]),e("div",pl,[t[36]||(t[36]=e("div",{class:"item-prefix"},"l1_z",-1)),e("div",vl,[h(e("input",{type:"text","onUpdate:modelValue":t[8]||(t[8]=o=>s.subL1_z=o),onInput:t[9]||(t[9]=o=>l("subL1_z",o))},null,544),[[k,s.subL1_z]])]),t[37]||(t[37]=e("div",{class:"item-suffix"},"cm",-1))]),e("div",ml,[t[38]||(t[38]=e("div",{class:"item-prefix"},"L1_x",-1)),e("div",gl,[h(e("input",{type:"text","onUpdate:modelValue":t[10]||(t[10]=o=>s.l1_x=o),onInput:t[11]||(t[11]=o=>l("l1_x",o))},null,544),[[k,s.l1_x]])]),t[39]||(t[39]=e("div",{class:"item-suffix"},"cm",-1))]),e("div",yl,[t[40]||(t[40]=e("div",{class:"item-prefix"},"L1_y",-1)),e("div",fl,[h(e("input",{type:"text","onUpdate:modelValue":t[12]||(t[12]=o=>s.l1_y=o),onInput:t[13]||(t[13]=o=>l("l1_y",o))},null,544),[[k,s.l1_y]])]),t[41]||(t[41]=e("div",{class:"item-suffix"},"cm",-1))]),e("div",wl,[t[42]||(t[42]=e("div",{class:"item-prefix"},"L1_z",-1)),e("div",xl,[h(e("input",{type:"text","onUpdate:modelValue":t[14]||(t[14]=o=>s.l1_z=o),onInput:t[15]||(t[15]=o=>l("l1_z",o))},null,544),[[k,s.l1_z]])]),t[43]||(t[43]=e("div",{class:"item-suffix"},"cm",-1))]),e("div",Il,[t[44]||(t[44]=e("div",{class:"item-prefix"},"L2_y",-1)),e("div",bl,[h(e("input",{type:"text","onUpdate:modelValue":t[16]||(t[16]=o=>s.l2_y=o),onInput:t[17]||(t[17]=o=>l("l2_y",o))},null,544),[[k,s.l2_y]])]),t[45]||(t[45]=e("div",{class:"item-suffix"},"cm",-1))]),e("div",_l,[t[46]||(t[46]=e("div",{class:"item-prefix"},"Edx",-1)),e("div",hl,[h(e("input",{type:"text","onUpdate:modelValue":t[18]||(t[18]=o=>s.edx=o),onInput:t[19]||(t[19]=o=>l("edx",o))},null,544),[[k,s.edx]])]),t[47]||(t[47]=e("div",{class:"item-suffix"},"cm",-1))]),e("div",$l,[t[48]||(t[48]=e("div",{class:"item-prefix"},"抗爆壁厚",-1)),e("div",jl,[h(e("input",{type:"text","onUpdate:modelValue":t[20]||(t[20]=o=>s.structWallThickness=o),onInput:t[21]||(t[21]=o=>l("structWallThickness",o))},null,544),[[k,s.structWallThickness]])]),t[49]||(t[49]=e("div",{class:"item-suffix"},"cm",-1))]),e("div",kl,[t[50]||(t[50]=e("div",{class:"item-prefix"},"箱体壁厚",-1)),e("div",Ml,[h(e("input",{type:"text","onUpdate:modelValue":t[22]||(t[22]=o=>s.boxThickness=o),onInput:t[23]||(t[23]=o=>l("boxThickness",o))},null,544),[[k,s.boxThickness]])]),t[51]||(t[51]=e("div",{class:"item-suffix"},"cm",-1))]),e("div",Cl,[t[52]||(t[52]=e("div",{class:"item-prefix"},"炸药材料",-1)),e("div",Vl,[$(r,{modelValue:d.value,"onUpdate:modelValue":t[24]||(t[24]=o=>d.value=o),clearable:"",placeholder:"请选择",style:{width:"240px",color:"white"},class:E("custom-select")},{default:S(()=>[(I(!0),M(J,null,Q(p.value,o=>(I(),q(c,{key:o.value,label:o.label,value:o.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])])]),e("div",Dl,[t[53]||(t[53]=e("div",{class:"item-prefix"},"箱体材料",-1)),e("div",Tl,[$(r,{modelValue:m.value,"onUpdate:modelValue":t[25]||(t[25]=o=>m.value=o),clearable:"",placeholder:"请选择",style:{width:"240px",color:"white"},class:E("custom-select")},{default:S(()=>[(I(!0),M(J,null,Q(p.value,o=>(I(),q(c,{key:o.value,label:o.label,value:o.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])])]),e("div",Ll,[t[54]||(t[54]=e("div",{class:"item-prefix"},"抗爆材料",-1)),e("div",Pl,[$(r,{modelValue:b.value,"onUpdate:modelValue":t[26]||(t[26]=o=>b.value=o),clearable:"",placeholder:"请选择",style:{width:"240px",color:"white"},class:E("custom-select")},{default:S(()=>[(I(!0),M(J,null,Q(p.value,o=>(I(),q(c,{key:o.value,label:o.label,value:o.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])])])])]),e("div",{class:"btn-box",onClick:t[27]||(t[27]=o=>x())})])}}}),Ul=A(Sl,[["__scopeId","data-v-ba23d8dd"]]),Nl={class:"container"},zl={class:"list-box"},Ol={class:"row-list"},Fl={class:"row-item"},El={class:"item-text",style:{width:"180px"}},Al={class:"row-item"},Bl={class:"item-text",style:{width:"180px"}},Wl={class:"row-item"},Kl={class:"item-text"},Jl={class:"row-list"},Rl={class:"row-item"},Hl={class:"item-text",style:{padding:"0px 0px"}},ql=R({__name:"ChargeSetting",props:{projectId:{}},setup(V){const a=V;ee(async()=>{console.log("the component is now mounted."),await d()}),te(()=>a.projectId,async l=>{l!==void 0&&l>=0&&await d()});const g=ne({id:0,projectId:a.projectId,warbodyType:null,targetPlatesLengthOne:null,targetPlatesLengthTwo:null,warbodyLength:null,materialId:0}),d=async()=>{if(a.projectId<0){console.error("项目ID无效",a.projectId);return}try{const l=await Xe(a.projectId);console.log("弹体详情",a.projectId,l),l&&(p.value=l.warbodyType,g.id=l.id,g.projectId=l.projectId,g.warbodyType=l.warbodyType,g.targetPlatesLengthOne=l.targetPlatesLengthOne,g.targetPlatesLengthTwo=l.targetPlatesLengthTwo,g.warbodyLength=l.warbodyLength,g.materialId=l.materialId)}catch(l){console.error("获取项目详情失败",l)}},v=w(!1),m=async()=>{if(!v.value){if(v.value=!0,g.projectId===null||g.projectId<=0){P.error("没有选择项目，请创建项目再保存."),v.value=!1;return}try{g.warbodyType=p.value,await Ye(g)}catch{}finally{v.value=!1}}},b=w(0),p=w(null),i=[{label:"截锥",value:0},{label:"圆柱形",value:1},{label:"卵形弹",value:2}];return(l,s)=>{const u=z("el-option"),_=z("el-select");return I(),M("div",Nl,[e("div",zl,[h(e("div",Ol,[e("div",Fl,[s[5]||(s[5]=e("div",{class:"item-prefix"},"设置圆柱长",-1)),e("div",El,[h(e("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=D=>g.targetPlatesLengthOne=D)},null,512),[[k,g.targetPlatesLengthOne]])]),s[6]||(s[6]=e("div",{class:"item-suffix"},"厘米",-1))]),e("div",Al,[s[7]||(s[7]=e("div",{class:"item-prefix"},"圆柱半径",-1)),e("div",Bl,[h(e("input",{type:"text","onUpdate:modelValue":s[1]||(s[1]=D=>g.targetPlatesLengthTwo=D)},null,512),[[k,g.targetPlatesLengthTwo]])]),s[8]||(s[8]=e("div",{class:"item-suffix"},"厘米",-1))]),e("div",Wl,[s[9]||(s[9]=e("div",{class:"item-prefix"},"材料名称",-1)),e("div",Kl,[h(e("input",{type:"text","onUpdate:modelValue":s[2]||(s[2]=D=>g.materialId=D)},null,512),[[k,g.materialId]])])])],512),[[oe,b.value==0]]),h(e("div",Jl,[s[11]||(s[11]=e("div",{class:"row-item"},[e("div",{class:"rectangle"}),e("div",{style:{color:"#97CDFF"}},"弹体模型")],-1)),s[12]||(s[12]=e("div",{class:"row-item-image",style:{"background-image":"url( /bullet2.png)"}},null,-1)),e("div",Rl,[s[10]||(s[10]=e("div",{class:"item-prefix"},"弹体类型",-1)),e("div",Hl,[$(_,{modelValue:p.value,"onUpdate:modelValue":s[3]||(s[3]=D=>p.value=D),clearable:"",placeholder:"请选择",style:{width:"240px",color:"white"},class:E("custom-select")},{default:S(()=>[(I(),M(J,null,Q(i,D=>$(u,{key:D.value,label:D.label,value:D.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])])])],512),[[oe,b.value!=0]])]),e("div",{class:"btn-box",onClick:s[4]||(s[4]=D=>m())})])}}}),Gl=A(ql,[["__scopeId","data-v-6d588668"]]),Ql={class:"container"},Xl={class:"row-list"},Yl={class:"row-item"},Zl={class:"item-text",style:{width:"100px"}},eo={class:"row-item"},to={class:"item-text",style:{width:"100px"}},so={class:"row-item"},lo={class:"item-text",style:{width:"100px"}},oo={class:"row-item"},io={class:"item-text",style:{width:"100px"}},ao={class:"row-item"},no={class:"item-text",style:{width:"100px"}},ro=R({__name:"SimulationParameterSettings",props:{projectId:{}},setup(V){const a=V;ee(async()=>{console.log("the component is now mounted."),await v()}),te(()=>a.projectId,async i=>{i!==void 0&&i>=0&&await v()});const g=(i,l)=>{l&&l.target&&l.target.value!==void 0&&(d[i]=l.target.value.replace(/[^0-9.]/g,"").replace(/(\.\d*)\./g,"$1"))},d=ne({id:0,projectId:a.projectId,tssfac:null,d3plots:null,slsfac:null,endtim:null,dt:null}),v=async()=>{if(a.projectId<0){console.error("项目ID无效",a.projectId);return}try{const i=await Te(a.projectId);console.log("仿真参数设置",a.projectId,i),i&&(d.id=i.id,d.projectId=i.projectId,d.tssfac=i.tssfac,d.d3plots=i.d3plots,d.slsfac=i.slsfac,d.endtim=i.endtim,d.dt=i.dt)}catch(i){console.error("获取项目详情失败",i)}},m=w(!1),b=async()=>{if(!m.value){if(m.value=!0,d.projectId===null||d.projectId<=0){P.error("没有选择项目，请创建项目再保存."),m.value=!1;return}try{if(!p(d)){P.error("请输入所有输入框内容再保存."),m.value=!1;return}await Ze(d),P({showClose:!0,message:"保存成功",type:"success"})}catch{P.error("保存失败，请稍后重试")}m.value=!1}},p=i=>{const l=["projectId","tssfac","d3plots","slsfac","endtim","dt"];for(const s of l)if(i[s]===null||i[s]==="")return!1;return!0};return w(2),(i,l)=>(I(),M("div",Ql,[e("div",Xl,[l[21]||(l[21]=e("div",{class:"row-item"},[e("div",{class:"rectangle"}),e("div",{style:{color:"#97CDFF"}},"输出控制参数")],-1)),e("div",Yl,[l[11]||(l[11]=e("div",{class:"item-prefix",style:{width:"140px"}},"时间步长(tssfac)",-1)),e("div",Zl,[h(e("input",{type:"text","onUpdate:modelValue":l[0]||(l[0]=s=>d.tssfac=s),onInput:l[1]||(l[1]=s=>g("tssfac",s))},null,544),[[k,d.tssfac]])]),l[12]||(l[12]=e("div",{class:"item-suffix"},null,-1))]),e("div",eo,[l[13]||(l[13]=e("div",{class:"item-prefix",style:{width:"140px"}},"输出间隔(D3PLOT)",-1)),e("div",to,[h(e("input",{type:"text","onUpdate:modelValue":l[2]||(l[2]=s=>d.d3plots=s),onInput:l[3]||(l[3]=s=>g("d3plots",s))},null,544),[[k,d.d3plots]])]),l[14]||(l[14]=e("div",{class:"item-suffix"},null,-1))]),e("div",so,[l[15]||(l[15]=e("div",{class:"item-prefix",style:{width:"140px"}},"接触刚度(slsfac)",-1)),e("div",lo,[h(e("input",{type:"text","onUpdate:modelValue":l[4]||(l[4]=s=>d.slsfac=s),onInput:l[5]||(l[5]=s=>g("slsfac",s))},null,544),[[k,d.slsfac]])]),l[16]||(l[16]=e("div",{class:"item-suffix"},null,-1))]),e("div",oo,[l[17]||(l[17]=e("div",{class:"item-prefix",style:{width:"140px"}},"计算时长(endtim)",-1)),e("div",io,[h(e("input",{type:"text","onUpdate:modelValue":l[6]||(l[6]=s=>d.endtim=s),onInput:l[7]||(l[7]=s=>g("endtim",s))},null,544),[[k,d.endtim]])]),l[18]||(l[18]=e("div",{class:"item-suffix"},null,-1))]),e("div",ao,[l[19]||(l[19]=e("div",{class:"item-prefix",style:{width:"140px"}},"输出间隔(D3THDT)",-1)),e("div",no,[h(e("input",{type:"text","onUpdate:modelValue":l[8]||(l[8]=s=>d.dt=s),onInput:l[9]||(l[9]=s=>g("dt",s))},null,544),[[k,d.dt]])]),l[20]||(l[20]=e("div",{class:"item-suffix"},null,-1))])]),e("div",{class:"btn-box",onClick:l[10]||(l[10]=s=>b())})]))}}),uo=A(ro,[["__scopeId","data-v-129c4541"]]),co={},po={class:"sim-panel"};function vo(V,a){return I(),M("div",po,a[0]||(a[0]=[e("div",{class:"sim-layout"},[e("div",{class:"sim-top"}),e("div",{class:"sim-body"}),e("div",{class:"sim-f"})],-1)]))}const mo=A(co,[["render",vo],["__scopeId","data-v-65607ede"]]),go={},yo={class:"container"};function fo(V,a){return I(),M("div",yo,a[0]||(a[0]=[De('<div class="item-box" style="background-image:url( /计算结果数据面板1.png);" data-v-8d301232><div style="width:710px;height:356px;margin-top:76px;margin-left:50px;background-image:url( /防护结构变形图.png);" data-v-8d301232></div></div><div class="item-box" style="background-image:url( /计算结果数据面板2.png);" data-v-8d301232><div style="width:780px;height:390px;margin-top:63px;margin-left:13px;background-image:url( /弹体速度变化曲线.png);" data-v-8d301232></div></div><div class="item-box" style="background-image:url( /计算结果数据面板3.png);" data-v-8d301232><div style="width:795px;height:320px;margin-top:90px;margin-left:8px;background-image:url( /防护结构各part内能变化曲线.png);" data-v-8d301232></div></div><div class="item-box" style="background-image:url( /计算结果数据面板4.png);" data-v-8d301232><div style="width:800px;height:325px;margin-top:63px;margin-left:13px;background-image:url( /防护结构整体内能变化曲线.png);" data-v-8d301232></div></div>',4)]))}const wo=A(go,[["render",fo],["__scopeId","data-v-8d301232"]]),xo={key:0,class:"main-container"},Io={class:"left-container"},bo={class:"right-container"},_o={key:1,class:"main-container"},ho=R({__name:"Main",props:{val:{type:Number,required:!0},projectId:{type:Number,default:0}},setup(V){const a=V;return(g,d)=>a.val!=7?(I(),M("div",xo,[e("div",Io,[a.val==1?(I(),q(as,{key:0,projectId:a.projectId,show:a.val==1},null,8,["projectId","show"])):a.val==2?(I(),q(us,{key:1,projectId:a.projectId,show:a.val==2},null,8,["projectId","show"])):a.val==3?(I(),q(el,{key:2,projectId:a.projectId,show:a.val==3},null,8,["projectId","show"])):a.val==4?(I(),q(Ul,{key:3,projectId:a.projectId,show:a.val==4},null,8,["projectId","show"])):a.val==5?(I(),q(Gl,{key:4,projectId:a.projectId,show:a.val==5},null,8,["projectId","show"])):a.val==6?(I(),q(uo,{key:5,projectId:a.projectId,show:a.val==6},null,8,["projectId","show"])):le("",!0)]),e("div",bo,[$(mo)])])):(I(),M("div",_o,[$(wo)]))}}),$o=A(ho,[["__scopeId","data-v-d1c43534"]]),jo={class:"page"},ko={class:"page-header"},Mo={class:"page-body"},Co={class:"left-body"},Vo={class:"main-body"},Do=R({__name:"index",setup(V){const a=w(1),g=m=>{console.log("updateSelectValue",m),a.value=m},d=w(0),v=m=>{console.log("updateSelectProjectId",m),d.value=m};return(m,b)=>(I(),M("div",jo,[e("div",ko,[$(Dt,{onUpdateSelectProjectId:v})]),e("div",Mo,[e("div",Co,[$(Et,{val:a.value,onUpdateSelectValue:g},null,8,["val"])]),e("div",Vo,[$($o,{val:a.value,"onUpdate:val":b[0]||(b[0]=p=>a.value=p),projectId:d.value},null,8,["val","projectId"])])])]))}}),So=A(Do,[["__scopeId","data-v-3aa43830"]]);export{So as default};
